<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Spotify - Web Player: Music for everyone</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta
      name="description"
      content="Spotify is a digital music service that gives you access to millions of songs."
    />
    <meta name="theme-color" content="#1db954" />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          CircularSp, CircularSp-Arab, CircularSp-Hebr, CircularSp-Cyrl,
          CircularSp-Grek, CircularSp-Deva, var(--fallback-fonts, sans-serif);
        --fallback-fonts:
          "Helvetica Neue", helvetica, arial, "Hiragino Kaku Gothic Pro",
          Meiryo, "MS Gothic", sans-serif;
        background-color: #121212;
        color: #ffffff;
        overflow-x: hidden;
        font-size: 14px;
        font-weight: 400;
        line-height: 1.6;
      }

      /* Spotify Design Tokens */
      :root {
        --spotify-green: #1db954;
        --spotify-green-hover: #1ed760;
        --spotify-green-active: #1aa34a;
        --spotify-black: #000000;
        --spotify-dark-gray: #121212;
        --spotify-gray: #191414;
        --spotify-light-gray: #2a2a2a;
        --spotify-white: #ffffff;
        --spotify-text-primary: #ffffff;
        --spotify-text-secondary: #b3b3b3;
        --spotify-text-subdued: #6a6a6a;
        --spotify-border: rgba(255, 255, 255, 0.1);
        --spotify-background-elevated: #242424;
        --spotify-background-press: rgba(255, 255, 255, 0.1);
        --spotify-background-tinted: hsla(0, 0%, 100%, 0.1);
      }

      /* Header Styles */
      .header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        background-color: var(--spotify-dark-gray);
        border-bottom: 1px solid var(--spotify-border);
        padding: 16px 24px;
      }

      .header-content {
        display: flex;
        align-items: center;
        justify-content: space-between;
        max-width: 100%;
      }

      .header-left {
        display: flex;
        align-items: center;
        gap: 24px;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
      }

      .logo-icon {
        width: 32px;
        height: 32px;
        background-color: var(--spotify-green);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .logo-icon::after {
        content: "";
        width: 16px;
        height: 16px;
        background-color: var(--spotify-black);
        border-radius: 50%;
      }

      .logo-text {
        font-size: 20px;
        font-weight: bold;
      }

      .nav-buttons {
        display: flex;
        gap: 8px;
      }

      .nav-btn {
        display: flex;
        align-items: center;
        gap: 8px;
        background-color: rgba(255, 255, 255, 0.1);
        border: none;
        color: #ffffff;
        padding: 8px 16px;
        border-radius: 20px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 600;
        transition: all 0.2s;
      }

      .nav-btn:hover {
        background-color: var(--spotify-background-press);
        transform: scale(1.05);
      }

      .nav-btn.active {
        background-color: var(--spotify-green);
        color: var(--spotify-black);
      }

      .back-btn,
      .forward-btn {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        padding: 0;
        background-color: rgba(0, 0, 0, 0.7);
        color: var(--spotify-text-primary);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .back-btn:disabled,
      .forward-btn:disabled {
        color: var(--spotify-text-subdued);
        cursor: not-allowed;
        background-color: rgba(0, 0, 0, 0.4);
      }

      .back-btn:hover:not(:disabled),
      .forward-btn:hover:not(:disabled) {
        background-color: rgba(0, 0, 0, 0.8);
        transform: none;
      }

      .breadcrumb-container {
        margin-left: 16px;
        flex: 1;
      }

      .breadcrumbs {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
      }

      .breadcrumb-item {
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--spotify-text-secondary);
        text-decoration: none;
        padding: 4px 8px;
        border-radius: 4px;
        transition: all 0.2s;
        font-weight: 500;
      }

      .breadcrumb-item:hover {
        color: var(--spotify-text-primary);
        background-color: rgba(255, 255, 255, 0.1);
      }

      .breadcrumb-item.current {
        color: var(--spotify-text-primary);
        cursor: default;
      }

      .breadcrumb-item.current:hover {
        background-color: transparent;
      }

      .breadcrumb-separator {
        color: var(--spotify-text-subdued);
        font-size: 12px;
      }

      .search-container {
        flex: 1;
        max-width: 500px;
        margin: 0 32px;
        position: relative;
      }

      .search-input {
        width: 100%;
        padding: 12px 12px 12px 48px;
        background-color: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 25px;
        color: #ffffff;
        font-size: 14px;
      }

      .search-input:focus {
        outline: none;
        border-color: var(--spotify-green);
        background-color: var(--spotify-background-tinted);
      }

      .search-input::placeholder {
        color: rgba(255, 255, 255, 0.6);
      }

      .search-icon {
        position: absolute;
        left: 16px;
        top: 50%;
        transform: translateY(-50%);
        color: rgba(255, 255, 255, 0.6);
      }

      .header-right {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .btn {
        padding: 8px 16px;
        border-radius: 20px;
        border: none;
        cursor: pointer;
        font-weight: 600;
        font-size: 14px;
        transition: all 0.2s;
      }

      .btn-primary {
        background-color: var(--spotify-white);
        color: var(--spotify-black);
      }

      .btn-primary:hover {
        transform: scale(1.05);
      }

      .btn-secondary {
        background-color: transparent;
        color: #ffffff;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .btn-secondary:hover {
        border-color: rgba(255, 255, 255, 0.4);
        transform: scale(1.05);
      }

      .btn-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: transparent;
        border: none;
        color: #ffffff;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background-color 0.2s;
      }

      .btn-icon:hover {
        background-color: rgba(255, 255, 255, 0.1);
      }

      /* Main Layout */
      .main-container {
        display: flex;
        margin-top: 80px;
        min-height: calc(100vh - 80px);
      }

      /* Sidebar */
      .sidebar {
        width: 320px;
        background-color: var(--spotify-black);
        min-height: calc(100vh - 80px);
        padding: 24px;
        position: fixed;
        left: 0;
        top: 80px;
        bottom: 90px;
        overflow-y: auto;
      }

      .sidebar-section {
        margin-bottom: 32px;
      }

      .sidebar-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 16px;
      }

      .sidebar-title {
        font-size: 18px;
        font-weight: 600;
        color: var(--spotify-text-primary);
      }

      .sidebar-nav {
        list-style: none;
        margin-bottom: 24px;
      }

      .sidebar-nav-item {
        margin-bottom: 8px;
      }

      .sidebar-nav-link {
        display: flex;
        align-items: center;
        gap: 16px;
        color: var(--spotify-text-secondary);
        text-decoration: none;
        padding: 12px 16px;
        border-radius: 8px;
        transition: all 0.2s;
        font-weight: 500;
      }

      .sidebar-nav-link:hover {
        color: var(--spotify-text-primary);
        background-color: var(--spotify-background-press);
      }

      .sidebar-nav-link.active {
        color: var(--spotify-text-primary);
        background-color: var(--spotify-background-tinted);
      }

      .playlist-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 8px 16px;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.2s;
        margin-bottom: 4px;
      }

      .playlist-item:hover {
        background-color: rgba(255, 255, 255, 0.05);
      }

      .playlist-cover {
        width: 48px;
        height: 48px;
        border-radius: 4px;
        object-fit: cover;
        background-color: #333;
      }

      .playlist-info {
        flex: 1;
        min-width: 0;
      }

      .playlist-name {
        font-weight: 500;
        color: #ffffff;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .playlist-meta {
        font-size: 12px;
        color: rgba(255, 255, 255, 0.6);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .quick-create {
        background-color: rgba(255, 255, 255, 0.05);
        border-radius: 8px;
        padding: 16px;
        margin-bottom: 16px;
      }

      .quick-create h3 {
        font-weight: 600;
        margin-bottom: 8px;
      }

      .quick-create p {
        font-size: 14px;
        color: rgba(255, 255, 255, 0.6);
        margin-bottom: 12px;
      }

      /* Main Content */
      .main-content {
        flex: 1;
        margin-left: 320px;
        margin-right: 8px;
        height: calc(100vh - 170px);
        overflow-y: auto;
        margin-bottom: 90px;
      }

      .content-wrapper {
        padding: 24px;
        min-height: 100%;
      }

      .page {
        display: none;
      }

      .page.active {
        display: block;
        animation: fadeIn 0.3s ease-out;
      }

      .page-header {
        margin-bottom: 32px;
      }

      .page-title {
        font-size: 32px;
        font-weight: bold;
        color: #ffffff;
        margin-bottom: 8px;
      }

      .page-subtitle {
        font-size: 16px;
        color: rgba(255, 255, 255, 0.7);
      }

      .section {
        margin-bottom: 48px;
      }

      .section-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 24px;
      }

      .section-title {
        font-size: 24px;
        font-weight: bold;
        color: #ffffff;
      }

      .show-all-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.6);
        font-size: 14px;
        cursor: pointer;
        font-weight: 600;
      }

      .show-all-btn:hover {
        color: #ffffff;
      }

      /* Card Grids */
      .cards-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
        gap: 16px;
      }

      .card {
        background-color: rgba(40, 40, 40, 0.3);
        border-radius: 8px;
        padding: 16px;
        cursor: pointer;
        transition: all 0.2s;
        position: relative;
      }

      .card:hover {
        background-color: rgba(255, 255, 255, 0.1);
        transform: translateY(-4px);
      }

      .card-image {
        width: 100%;
        aspect-ratio: 1;
        border-radius: 4px;
        object-fit: cover;
        margin-bottom: 16px;
      }

      .artist-image {
        border-radius: 50%;
      }

      .card-title {
        font-weight: 600;
        color: #ffffff;
        margin-bottom: 8px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .card-subtitle {
        font-size: 14px;
        color: rgba(255, 255, 255, 0.6);
        line-height: 1.4;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .play-button {
        position: absolute;
        bottom: 24px;
        right: 16px;
        width: 48px;
        height: 48px;
        background-color: #1db954;
        border: none;
        border-radius: 50%;
        color: #000000;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transform: translateY(8px);
        transition: all 0.2s;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
      }

      .card:hover .play-button {
        opacity: 1;
        transform: translateY(0);
      }

      .play-button:hover {
        transform: scale(1.05);
        background-color: #1ed760;
      }

      /* Music Player */
      .music-player {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background-color: #181818;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        padding: 16px 24px;
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 16px;
      }

      .player-left {
        display: flex;
        align-items: center;
        gap: 12px;
        min-width: 300px;
      }

      .now-playing-cover {
        width: 56px;
        height: 56px;
        border-radius: 4px;
        object-fit: cover;
        background-color: #333;
      }

      .now-playing-info {
        flex: 1;
        min-width: 0;
      }

      .now-playing-title {
        font-weight: 500;
        color: #ffffff;
        font-size: 14px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .now-playing-artist {
        font-size: 11px;
        color: rgba(255, 255, 255, 0.6);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        cursor: pointer;
      }

      .now-playing-artist:hover {
        color: #ffffff;
        text-decoration: underline;
      }

      .player-controls {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
      }

      .control-buttons {
        display: flex;
        align-items: center;
        gap: 16px;
      }

      .control-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.6);
        cursor: pointer;
        padding: 8px;
        border-radius: 50%;
        transition: color 0.2s;
      }

      .control-btn:hover {
        color: #ffffff;
      }

      .control-btn.play-pause {
        color: #ffffff;
        background-color: #ffffff;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .control-btn.play-pause:hover {
        transform: scale(1.05);
      }

      .progress-container {
        display: flex;
        align-items: center;
        gap: 8px;
        width: 100%;
        max-width: 480px;
      }

      .progress-time {
        font-size: 11px;
        color: rgba(255, 255, 255, 0.6);
        min-width: 40px;
      }

      .progress-bar {
        flex: 1;
        height: 4px;
        background-color: rgba(255, 255, 255, 0.3);
        border-radius: 2px;
        cursor: pointer;
        position: relative;
      }

      .progress-fill {
        height: 100%;
        background-color: #ffffff;
        border-radius: 2px;
        width: 30%;
        position: relative;
      }

      .progress-handle {
        position: absolute;
        right: -6px;
        top: 50%;
        transform: translateY(-50%);
        width: 12px;
        height: 12px;
        background-color: #ffffff;
        border-radius: 50%;
        opacity: 0;
        transition: opacity 0.2s;
      }

      .progress-bar:hover .progress-handle {
        opacity: 1;
      }

      .player-right {
        display: flex;
        align-items: center;
        gap: 8px;
        min-width: 180px;
        justify-content: flex-end;
      }

      .volume-container {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .volume-bar {
        width: 80px;
        height: 4px;
        background-color: rgba(255, 255, 255, 0.3);
        border-radius: 2px;
        cursor: pointer;
        position: relative;
      }

      .volume-fill {
        height: 100%;
        background-color: #ffffff;
        border-radius: 2px;
        width: 70%;
      }

      /* Trending Songs List */
      .trending-list {
        display: grid;
        grid-template-columns: 1fr;
        gap: 4px;
      }

      .trending-item {
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.2s;
        position: relative;
      }

      .trending-item:hover {
        background-color: rgba(255, 255, 255, 0.1);
      }

      .track-number {
        width: 16px;
        text-align: center;
        color: rgba(255, 255, 255, 0.6);
        font-size: 14px;
      }

      .trending-item:hover .track-number {
        display: none;
      }

      .trending-play-btn {
        position: absolute;
        left: 16px;
        width: 16px;
        height: 16px;
        background: none;
        border: none;
        color: #ffffff;
        cursor: pointer;
        display: none;
      }

      .trending-item:hover .trending-play-btn {
        display: block;
      }

      .trending-cover {
        width: 40px;
        height: 40px;
        border-radius: 4px;
        object-fit: cover;
      }

      .trending-info {
        flex: 1;
        min-width: 0;
      }

      .trending-title {
        font-weight: 500;
        color: #ffffff;
        font-size: 16px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .trending-artist {
        font-size: 14px;
        color: rgba(255, 255, 255, 0.6);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .trending-actions {
        display: flex;
        align-items: center;
        gap: 16px;
      }

      .trending-duration {
        font-size: 14px;
        color: rgba(255, 255, 255, 0.6);
        min-width: 50px;
        text-align: right;
      }

      /* Icons */
      .icon {
        width: 20px;
        height: 20px;
        fill: currentColor;
      }

      .icon-sm {
        width: 16px;
        height: 16px;
      }

      .icon-lg {
        width: 24px;
        height: 24px;
      }

      .icon-play {
        width: 16px;
        height: 16px;
        margin-left: 2px;
      }

      /* Search Results */
      .search-filters {
        display: flex;
        gap: 8px;
        margin-bottom: 24px;
        flex-wrap: wrap;
      }

      .filter-chip {
        background-color: rgba(255, 255, 255, 0.1);
        border: none;
        color: #ffffff;
        padding: 8px 16px;
        border-radius: 20px;
        cursor: pointer;
        font-size: 14px;
        transition: background-color 0.2s;
      }

      .filter-chip:hover,
      .filter-chip.active {
        background-color: #ffffff;
        color: #000000;
      }

      .search-results {
        display: grid;
        gap: 24px;
      }

      .result-section {
        margin-bottom: 32px;
      }

      /* Profile & Settings */
      .profile-header {
        display: flex;
        align-items: flex-end;
        gap: 24px;
        margin-bottom: 32px;
      }

      .profile-image {
        width: 160px;
        height: 160px;
        border-radius: 50%;
        object-fit: cover;
        background-color: #333;
      }

      .profile-info h1 {
        font-size: 48px;
        font-weight: bold;
        margin-bottom: 8px;
      }

      .profile-meta {
        color: rgba(255, 255, 255, 0.7);
        font-size: 14px;
      }

      /* Responsive Design */
      @media (max-width: 1024px) {
        .sidebar {
          display: none;
        }

        .main-content {
          margin-left: 0;
        }

        .search-container {
          display: none;
        }

        .player-left {
          min-width: 200px;
        }

        .player-right {
          min-width: 120px;
        }
      }

      @media (max-width: 768px) {
        .header-content {
          padding: 0 16px;
        }

        .nav-buttons {
          display: none;
        }

        .btn-secondary {
          display: none;
        }

        .cards-grid {
          grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
          gap: 12px;
        }

        .content-wrapper {
          padding: 16px;
        }

        .section-title {
          font-size: 20px;
        }

        .page-title {
          font-size: 24px;
        }

        .music-player {
          padding: 12px 16px;
        }

        .player-right .control-btn {
          display: none;
        }

        .volume-container {
          display: none;
        }
      }

      @media (max-width: 480px) {
        .cards-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: 8px;
        }

        .card {
          padding: 12px;
        }

        .trending-item {
          gap: 12px;
          padding: 8px;
        }

        .player-controls {
          gap: 4px;
        }

        .progress-container {
          max-width: 200px;
        }
      }

      /* Animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .loading {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 40px;
      }

      .spinner {
        width: 32px;
        height: 32px;
        border: 3px solid rgba(255, 255, 255, 0.1);
        border-top: 3px solid #1db954;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .hidden {
        display: none !important;
      }

      /* Premium Features */
      .premium-banner {
        background: linear-gradient(135deg, #1db954, #1ed760);
        padding: 24px;
        border-radius: 8px;
        margin-bottom: 32px;
        text-align: center;
      }

      .premium-banner h2 {
        color: #000000;
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 8px;
      }

      .premium-banner p {
        color: rgba(0, 0, 0, 0.8);
        margin-bottom: 16px;
      }

      .premium-btn {
        background-color: #000000;
        color: #ffffff;
        border: none;
        padding: 12px 24px;
        border-radius: 24px;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s;
      }

      .premium-btn:hover {
        transform: scale(1.05);
      }

      /* Feature Grid */
      .feature-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 24px;
        margin-bottom: 32px;
      }

      .feature-card {
        background-color: rgba(255, 255, 255, 0.05);
        padding: 24px;
        border-radius: 8px;
      }

      .feature-card h3 {
        font-size: 20px;
        margin-bottom: 12px;
      }

      .feature-card p {
        color: rgba(255, 255, 255, 0.7);
        line-height: 1.5;
      }

      /* Tables */
      .table {
        width: 100%;
        border-collapse: collapse;
      }

      .table th,
      .table td {
        padding: 8px 16px;
        text-align: left;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .table th {
        color: rgba(255, 255, 255, 0.6);
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-weight: 500;
      }

      .table tr:hover {
        background-color: rgba(255, 255, 255, 0.05);
      }

      /* Modal Styles */
      .modal {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2000;
      }

      .modal-content {
        background-color: #282828;
        padding: 32px;
        border-radius: 8px;
        max-width: 500px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
      }

      .modal-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 24px;
      }

      .modal-title {
        font-size: 24px;
        font-weight: bold;
      }

      .modal-close {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.6);
        cursor: pointer;
        padding: 8px;
        border-radius: 50%;
      }

      .modal-close:hover {
        color: #ffffff;
        background-color: rgba(255, 255, 255, 0.1);
      }

      /* Form Styles */
      .form-group {
        margin-bottom: 20px;
      }

      .form-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: #ffffff;
      }

      .form-input {
        width: 100%;
        padding: 12px 16px;
        background-color: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 4px;
        color: #ffffff;
        font-size: 14px;
      }

      .form-input:focus {
        outline: none;
        border-color: #1db954;
        background-color: rgba(255, 255, 255, 0.15);
      }

      .form-input::placeholder {
        color: rgba(255, 255, 255, 0.5);
      }

      /* Notification */
      .notification {
        position: fixed;
        top: 100px;
        right: 24px;
        background-color: var(--spotify-green);
        color: var(--spotify-black);
        padding: 16px 24px;
        border-radius: 8px;
        font-weight: 500;
        z-index: 3000;
        transform: translateX(100%);
        transition: transform 0.3s ease;
      }

      .notification.show {
        transform: translateX(0);
      }

      /* Now Playing Full Screen Styles */
      .now-playing-fullscreen {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          180deg,
          var(--spotify-dark-gray) 0%,
          var(--spotify-black) 100%
        );
        display: flex;
        flex-direction: column;
        z-index: 2000;
      }

      .now-playing-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 24px 32px;
      }

      .now-playing-title {
        font-size: 14px;
        font-weight: 500;
        color: var(--spotify-text-primary);
        margin: 0;
      }

      .now-playing-content {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 80px;
        padding: 0 80px 120px;
      }

      .now-playing-artwork {
        flex-shrink: 0;
      }

      .fullscreen-album-art {
        width: 400px;
        height: 400px;
        border-radius: 8px;
        object-fit: cover;
        box-shadow: 0 16px 40px rgba(0, 0, 0, 0.5);
      }

      .now-playing-info-section {
        flex: 1;
        max-width: 500px;
      }

      .now-playing-track-info {
        margin-bottom: 32px;
      }

      .fullscreen-track-title {
        font-size: 48px;
        font-weight: 900;
        color: var(--spotify-text-primary);
        margin-bottom: 8px;
        line-height: 1.2;
      }

      .fullscreen-track-artist {
        font-size: 24px;
        font-weight: 400;
        color: var(--spotify-text-secondary);
        margin: 0;
      }

      .now-playing-actions {
        display: flex;
        gap: 32px;
        margin-bottom: 48px;
      }

      .fullscreen-controls {
        margin-bottom: 32px;
      }

      .fullscreen-progress {
        display: flex;
        align-items: center;
        gap: 16px;
        margin-bottom: 32px;
      }

      .fullscreen-progress-bar {
        flex: 1;
        height: 6px;
        cursor: pointer;
      }

      .fullscreen-progress-bar .progress-fill {
        height: 100%;
        border-radius: 3px;
      }

      .fullscreen-progress-bar:hover .progress-handle {
        opacity: 1;
      }

      .fullscreen-playback-controls {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 24px;
      }

      .fullscreen-play-btn {
        width: 64px;
        height: 64px;
        background-color: var(--spotify-white);
        border-radius: 50%;
      }

      .fullscreen-play-btn:hover {
        transform: scale(1.05);
      }

      .fullscreen-volume {
        display: flex;
        align-items: center;
        gap: 16px;
        max-width: 300px;
      }

      .fullscreen-volume-bar {
        flex: 1;
        height: 4px;
      }

      /* Mobile responsive for Now Playing */
      @media (max-width: 1024px) {
        .now-playing-content {
          flex-direction: column;
          gap: 40px;
          padding: 0 32px 120px;
        }

        .fullscreen-album-art {
          width: 300px;
          height: 300px;
        }

        .fullscreen-track-title {
          font-size: 32px;
        }

        .fullscreen-track-artist {
          font-size: 18px;
        }
      }

      @media (max-width: 768px) {
        .now-playing-header {
          padding: 16px 24px;
        }

        .now-playing-content {
          padding: 0 24px 120px;
        }

        .fullscreen-album-art {
          width: 250px;
          height: 250px;
        }

        .fullscreen-track-title {
          font-size: 24px;
        }

        .fullscreen-track-artist {
          font-size: 16px;
        }

        .now-playing-actions {
          gap: 16px;
        }

        .fullscreen-playback-controls {
          gap: 16px;
        }

        .fullscreen-play-btn {
          width: 56px;
          height: 56px;
        }
      }

      /* Liked Songs Page Styles */
      .liked-songs-header {
        background: linear-gradient(180deg, #5038a0 0%, #121212 100%);
        padding: 32px 32px 24px;
        color: white;
      }

      .liked-songs-hero {
        display: flex;
        align-items: flex-end;
        gap: 24px;
        margin-bottom: 32px;
      }

      .liked-songs-artwork {
        width: 232px;
        height: 232px;
        position: relative;
        flex-shrink: 0;
      }

      .liked-songs-gradient {
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #450af5, #c4efd9);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .liked-songs-info {
        flex: 1;
        min-width: 0;
      }

      .playlist-type {
        font-size: 13px;
        font-weight: 500;
        color: var(--spotify-text-primary);
        margin-bottom: 8px;
      }

      .playlist-title {
        font-size: 96px;
        font-weight: 900;
        color: var(--spotify-text-primary);
        margin-bottom: 24px;
        line-height: 1;
      }

      .playlist-meta {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        color: var(--spotify-text-primary);
      }

      .playlist-separator {
        color: var(--spotify-text-secondary);
      }

      .playlist-actions {
        display: flex;
        align-items: center;
        gap: 32px;
      }

      .play-button-large {
        width: 64px;
        height: 64px;
        background-color: var(--spotify-green);
        border: none;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s;
      }

      .play-button-large:hover {
        background-color: var(--spotify-green-hover);
        transform: scale(1.05);
      }

      .playlist-content {
        padding: 0 32px 32px;
      }

      .playlist-header-row {
        display: grid;
        grid-template-columns: 40px 4fr 2fr 1fr 60px;
        gap: 16px;
        align-items: center;
        padding: 8px 16px;
        border-bottom: 1px solid var(--spotify-border);
        margin-bottom: 16px;
        font-size: 12px;
        color: var(--spotify-text-secondary);
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .playlist-tracks {
        display: grid;
        gap: 4px;
      }

      .playlist-track-item {
        display: grid;
        grid-template-columns: 40px 4fr 2fr 1fr 60px;
        gap: 16px;
        align-items: center;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.2s;
        position: relative;
      }

      .playlist-track-item:hover {
        background-color: var(--spotify-background-press);
      }

      .track-number {
        color: var(--spotify-text-secondary);
        font-size: 14px;
        text-align: center;
      }

      .playlist-track-item:hover .track-number {
        display: none;
      }

      .track-play-btn {
        position: absolute;
        left: 20px;
        width: 16px;
        height: 16px;
        background: none;
        border: none;
        color: var(--spotify-text-primary);
        cursor: pointer;
        display: none;
      }

      .playlist-track-item:hover .track-play-btn {
        display: block;
      }

      .track-info {
        display: flex;
        align-items: center;
        gap: 12px;
        min-width: 0;
      }

      .track-cover {
        width: 40px;
        height: 40px;
        border-radius: 4px;
        object-fit: cover;
      }

      .track-details {
        min-width: 0;
        flex: 1;
      }

      .track-name {
        font-weight: 500;
        color: var(--spotify-text-primary);
        margin-bottom: 4px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .track-artist {
        font-size: 14px;
        color: var(--spotify-text-secondary);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .track-album {
        color: var(--spotify-text-secondary);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .track-date {
        color: var(--spotify-text-secondary);
        font-size: 14px;
      }

      .track-duration {
        color: var(--spotify-text-secondary);
        font-size: 14px;
        text-align: right;
      }

      /* Mobile responsive for Liked Songs */
      @media (max-width: 1024px) {
        .liked-songs-hero {
          flex-direction: column;
          align-items: center;
          text-align: center;
          gap: 16px;
        }

        .liked-songs-artwork {
          width: 192px;
          height: 192px;
        }

        .playlist-title {
          font-size: 48px;
        }

        .playlist-header-row {
          grid-template-columns: 40px 1fr 60px;
        }

        .playlist-track-item {
          grid-template-columns: 40px 1fr 60px;
        }

        .track-album,
        .track-date,
        .track-album-header,
        .track-date-header {
          display: none;
        }
      }

      @media (max-width: 768px) {
        .liked-songs-header {
          padding: 24px 16px;
        }

        .playlist-content {
          padding: 0 16px 32px;
        }

        .liked-songs-artwork {
          width: 160px;
          height: 160px;
        }

        .playlist-title {
          font-size: 32px;
        }
      }

      /* Context Menu Styles */
      .context-menu {
        position: fixed;
        background-color: var(--spotify-background-elevated);
        border: 1px solid var(--spotify-border);
        border-radius: 4px;
        padding: 4px 0;
        z-index: 3000;
        min-width: 200px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
        opacity: 0;
        transform: scale(0.95);
        transition: all 0.15s ease;
      }

      .context-menu.show {
        opacity: 1;
        transform: scale(1);
      }

      .context-menu-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 16px;
        cursor: pointer;
        transition: background-color 0.2s;
        font-size: 14px;
        color: var(--spotify-text-primary);
      }

      .context-menu-item:hover {
        background-color: var(--spotify-background-press);
      }

      .context-menu-item.disabled {
        color: var(--spotify-text-subdued);
        cursor: not-allowed;
      }

      .context-menu-item.disabled:hover {
        background-color: transparent;
      }

      .context-menu-separator {
        height: 1px;
        background-color: var(--spotify-border);
        margin: 4px 0;
      }

      .context-menu-submenu {
        position: relative;
      }

      .context-menu-submenu::after {
        content: "";
        position: absolute;
        right: 16px;
        top: 50%;
        transform: translateY(-50%);
        width: 0;
        height: 0;
        border-left: 4px solid var(--spotify-text-secondary);
        border-top: 4px solid transparent;
        border-bottom: 4px solid transparent;
      }

      /* Loading Animations and Skeleton Screens */
      .skeleton {
        background: linear-gradient(
          90deg,
          rgba(255, 255, 255, 0.05) 25%,
          rgba(255, 255, 255, 0.1) 50%,
          rgba(255, 255, 255, 0.05) 75%
        );
        background-size: 200% 100%;
        animation: loading 1.5s infinite;
        border-radius: 4px;
      }

      @keyframes loading {
        0% {
          background-position: 200% 0;
        }
        100% {
          background-position: -200% 0;
        }
      }

      .skeleton-card {
        background-color: var(--spotify-background-elevated);
        padding: 16px;
        border-radius: 8px;
        margin-bottom: 16px;
      }

      .skeleton-image {
        width: 100%;
        aspect-ratio: 1;
        background-color: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        margin-bottom: 16px;
      }

      .skeleton-image.round {
        border-radius: 50%;
      }

      .skeleton-text {
        height: 16px;
        background-color: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        margin-bottom: 8px;
      }

      .skeleton-text.large {
        height: 24px;
      }

      .skeleton-text.small {
        height: 12px;
        width: 60%;
      }

      .skeleton-track {
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 8px 16px;
        margin-bottom: 4px;
      }

      .skeleton-track-cover {
        width: 40px;
        height: 40px;
        background-color: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        flex-shrink: 0;
      }

      .skeleton-track-info {
        flex: 1;
        min-width: 0;
      }

      .skeleton-track-title {
        height: 16px;
        background-color: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        margin-bottom: 4px;
        width: 70%;
      }

      .skeleton-track-artist {
        height: 12px;
        background-color: rgba(255, 255, 255, 0.05);
        border-radius: 4px;
        width: 50%;
      }

      .skeleton-track-duration {
        width: 40px;
        height: 12px;
        background-color: rgba(255, 255, 255, 0.05);
        border-radius: 4px;
      }

      /* Loading spinner */
      .loading-spinner {
        width: 24px;
        height: 24px;
        border: 2px solid rgba(255, 255, 255, 0.1);
        border-top: 2px solid var(--spotify-green);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 20px auto;
      }

      .loading-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 40px;
        color: var(--spotify-text-secondary);
      }

      .loading-text {
        margin-top: 16px;
        font-size: 14px;
      }

      /* Error States */
      .error-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 60px 40px;
        text-align: center;
        color: var(--spotify-text-secondary);
      }

      .error-icon {
        width: 80px;
        height: 80px;
        margin-bottom: 24px;
        color: var(--spotify-text-subdued);
      }

      .error-title {
        font-size: 24px;
        font-weight: bold;
        color: var(--spotify-text-primary);
        margin-bottom: 16px;
      }

      .error-message {
        font-size: 16px;
        line-height: 1.5;
        margin-bottom: 32px;
        max-width: 400px;
      }

      .error-actions {
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
        justify-content: center;
      }

      .retry-btn {
        background-color: var(--spotify-green);
        color: var(--spotify-black);
        border: none;
        padding: 12px 24px;
        border-radius: 24px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
      }

      .retry-btn:hover {
        background-color: var(--spotify-green-hover);
        transform: scale(1.05);
      }

      .error-secondary-btn {
        background-color: transparent;
        color: var(--spotify-text-primary);
        border: 1px solid var(--spotify-border);
        padding: 12px 24px;
        border-radius: 24px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
      }

      .error-secondary-btn:hover {
        background-color: var(--spotify-background-press);
        border-color: var(--spotify-text-primary);
      }

      .connection-error {
        background-color: rgba(229, 62, 62, 0.1);
        border: 1px solid rgba(229, 62, 62, 0.3);
        color: #ff6b6b;
        padding: 16px;
        border-radius: 8px;
        margin: 16px 0;
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .connection-error.hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="header-left">
          <div class="logo" onclick="navigateTo('home')">
            <div class="logo-icon"></div>
            <span class="logo-text">Spotify</span>
          </div>
          <div class="nav-buttons">
            <button class="nav-btn back-btn" onclick="goBack()" disabled>
              <svg class="icon-sm" viewBox="0 0 24 24">
                <path
                  d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.42-1.41L7.83 13H20v-2z"
                />
              </svg>
            </button>
            <button class="nav-btn forward-btn" onclick="goForward()" disabled>
              <svg class="icon-sm" viewBox="0 0 24 24">
                <path
                  d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"
                />
              </svg>
            </button>
            <div class="breadcrumb-container">
              <nav class="breadcrumbs" id="breadcrumbs">
                <!-- Breadcrumbs will be populated by JavaScript -->
              </nav>
            </div>
          </div>
        </div>

        <div class="search-container">
          <svg class="search-icon icon" viewBox="0 0 24 24">
            <path
              d="M15.5 14h-.79l-.28-.27A6.518 6.518 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
            />
          </svg>
          <input
            type="text"
            class="search-input"
            placeholder="What do you want to play?"
            id="main-search"
          />
        </div>

        <div class="header-right">
          <button class="btn btn-secondary" onclick="navigateTo('premium')">
            <svg class="icon-sm" viewBox="0 0 24 24" style="margin-right: 8px">
              <path
                fill="currentColor"
                d="M17 2h-3v2h3v2h2V4c0-1.1-.9-2-2-2zM7 2H4c-1.1 0-2 .9-2 2v2h2V4h3V2zm10 18h-3v2h3c1.1 0 2-.9 2-2v-2h-2v2zM7 20H4v-2H2v2c0 1.1.9 2 2 2h3v-2zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"
              />
            </svg>
            Install App
          </button>
          <button class="btn-icon" onclick="toggleNotifications()">
            <svg class="icon" viewBox="0 0 24 24">
              <path
                fill="currentColor"
                d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"
              />
            </svg>
          </button>
          <button class="btn btn-secondary" onclick="openAuthModal('signup')">
            Sign up
          </button>
          <button class="btn btn-primary" onclick="openAuthModal('login')">
            Log in
          </button>
          <button class="btn-icon" onclick="navigateTo('profile')">
            <svg class="icon" viewBox="0 0 24 24">
              <path
                fill="currentColor"
                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"
              />
            </svg>
          </button>
        </div>
      </div>
    </header>

    <div class="main-container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-section">
          <ul class="sidebar-nav">
            <li class="sidebar-nav-item">
              <a href="#" class="sidebar-nav-link active" data-page="library">
                <svg class="icon" viewBox="0 0 24 24">
                  <path
                    fill="currentColor"
                    d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"
                  />
                </svg>
                Your Library
              </a>
            </li>
            <li class="sidebar-nav-item">
              <a href="#" class="sidebar-nav-link" data-page="playlists">
                <svg class="icon" viewBox="0 0 24 24">
                  <path
                    fill="currentColor"
                    d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h8c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"
                  />
                </svg>
                Playlists
              </a>
            </li>
            <li class="sidebar-nav-item">
              <a href="#" class="sidebar-nav-link" data-page="podcasts">
                <svg class="icon" viewBox="0 0 24 24">
                  <path
                    fill="currentColor"
                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
                  />
                </svg>
                Podcasts
              </a>
            </li>
            <li class="sidebar-nav-item">
              <a href="#" class="sidebar-nav-link" data-page="browse">
                <svg class="icon" viewBox="0 0 24 24">
                  <path
                    fill="currentColor"
                    d="M9 11H7v6h2v-6zm4 0h-2v6h2v-6zm4 0h-2v6h2v-6zm2.5-5H19V4h-3V2h-2v2H9V2H7v2H4v2h.5L6 16c.1 1.1 1 2 2.1 2h7.8c1.1 0 2-.9 2.1-2l1.5-10z"
                  />
                </svg>
                Browse
              </a>
            </li>
            <li class="sidebar-nav-item">
              <a href="#" class="sidebar-nav-link" data-page="settings">
                <svg class="icon" viewBox="0 0 24 24">
                  <path
                    fill="currentColor"
                    d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1 0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"
                  />
                </svg>
                Settings
              </a>
            </li>
          </ul>

          <div class="sidebar-header">
            <h2 class="sidebar-title">Recently Played</h2>
            <button class="btn-icon" onclick="createPlaylist()">
              <svg class="icon" viewBox="0 0 24 24">
                <path
                  fill="currentColor"
                  d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"
                />
              </svg>
            </button>
          </div>

          <div id="recent-playlists">
            <!-- Recent playlists will be populated here -->
          </div>

          <div class="quick-create">
            <h3>Create your first playlist</h3>
            <p>It's easy, we'll help you</p>
            <button class="btn btn-primary" onclick="createPlaylist()">
              Create playlist
            </button>
          </div>

          <div class="quick-create">
            <h3>Let's find some podcasts to follow</h3>
            <p>We'll keep you updated on new episodes</p>
            <button class="btn btn-primary" onclick="navigateTo('podcasts')">
              Browse podcasts
            </button>
          </div>

          <!-- Footer links -->
          <div
            style="
              margin-top: 40px;
              font-size: 12px;
              color: rgba(255, 255, 255, 0.6);
              line-height: 1.6;
            "
          >
            <div
              style="
                display: flex;
                flex-wrap: wrap;
                gap: 16px;
                margin-bottom: 8px;
              "
            >
              <a
                href="#"
                style="color: rgba(255, 255, 255, 0.6); text-decoration: none"
                onclick="showNotification('Legal page')"
                onmouseover="this.style.color='#ffffff'"
                onmouseout="this.style.color='rgba(255, 255, 255, 0.6)'"
              >
                Legal
              </a>
              <a
                href="#"
                style="color: rgba(255, 255, 255, 0.6); text-decoration: none"
                onclick="showNotification('Safety page')"
                onmouseover="this.style.color='#ffffff'"
                onmouseout="this.style.color='rgba(255, 255, 255, 0.6)'"
              >
                Safety & Privacy Center
              </a>
              <a
                href="#"
                style="color: rgba(255, 255, 255, 0.6); text-decoration: none"
                onclick="showNotification('Privacy page')"
                onmouseover="this.style.color='#ffffff'"
                onmouseout="this.style.color='rgba(255, 255, 255, 0.6)'"
              >
                Privacy Policy
              </a>
            </div>
            <div
              style="
                display: flex;
                flex-wrap: wrap;
                gap: 16px;
                margin-bottom: 8px;
              "
            >
              <a
                href="#"
                style="color: rgba(255, 255, 255, 0.6); text-decoration: none"
                onclick="navigateTo('help')"
                onmouseover="this.style.color='#ffffff'"
                onmouseout="this.style.color='rgba(255, 255, 255, 0.6)'"
              >
                Help
              </a>
              <a
                href="#"
                style="color: rgba(255, 255, 255, 0.6); text-decoration: none"
                onclick="navigateTo('about')"
                onmouseover="this.style.color='#ffffff'"
                onmouseout="this.style.color='rgba(255, 255, 255, 0.6)'"
              >
                About
              </a>
              <a
                href="#"
                style="color: rgba(255, 255, 255, 0.6); text-decoration: none"
                onclick="showNotification('Accessibility page')"
                onmouseover="this.style.color='#ffffff'"
                onmouseout="this.style.color='rgba(255, 255, 255, 0.6)'"
              >
                Accessibility
              </a>
            </div>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <div class="content-wrapper">
          <!-- Home Page -->
          <div id="home" class="page active">
            <div class="page-header">
              <h1 class="page-title">Good evening</h1>
              <p class="page-subtitle">
                Welcome back! Here's what's trending now.
              </p>
            </div>

            <!-- Quick Access Cards -->
            <section class="section">
              <div
                class="cards-grid"
                style="
                  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                  margin-bottom: 32px;
                "
              >
                <div
                  class="card"
                  style="
                    display: flex;
                    align-items: center;
                    padding: 0;
                    height: 80px;
                    background: linear-gradient(135deg, #1db954, #1ed760);
                  "
                  onclick="navigateTo('liked-songs')"
                >
                  <img
                    src="https://picsum.photos/80/80?random=liked"
                    alt="Liked Songs"
                    style="
                      width: 80px;
                      height: 80px;
                      border-radius: 8px 0 0 8px;
                      margin: 0;
                    "
                  />
                  <div style="padding: 0 16px; flex: 1">
                    <div class="card-title" style="color: #000000; margin: 0">
                      Liked Songs
                    </div>
                  </div>
                  <button
                    class="play-button"
                    style="
                      position: static;
                      opacity: 1;
                      transform: none;
                      margin-right: 16px;
                      background-color: #000000;
                    "
                  >
                    <svg
                      class="icon-play"
                      viewBox="0 0 24 24"
                      style="fill: #1db954"
                    >
                      <path d="M8 5v14l11-7z" />
                    </svg>
                  </button>
                </div>
              </div>
            </section>

            <!-- Trending Now Section -->
            <section class="section">
              <div class="section-header">
                <h2 class="section-title">Trending now</h2>
                <button class="show-all-btn" onclick="navigateTo('search')">
                  Show all
                </button>
              </div>
              <div class="trending-list" id="trending-list">
                <!-- Trending songs will be populated by JavaScript -->
              </div>
            </section>

            <!-- Popular Artists Section -->
            <section class="section">
              <div class="section-header">
                <h2 class="section-title">Popular artists</h2>
                <button class="show-all-btn">Show all</button>
              </div>
              <div class="cards-grid" id="artists-grid">
                <!-- Artists will be populated by JavaScript -->
              </div>
            </section>

            <!-- Popular Albums Section -->
            <section class="section">
              <div class="section-header">
                <h2 class="section-title">Popular albums</h2>
                <button class="show-all-btn">Show all</button>
              </div>
              <div class="cards-grid" id="albums-grid">
                <!-- Albums will be populated by JavaScript -->
              </div>
            </section>

            <!-- Made for You Section -->
            <section class="section">
              <div class="section-header">
                <h2 class="section-title">Made for you</h2>
                <button class="show-all-btn">Show all</button>
              </div>
              <div class="cards-grid" id="recommended-grid">
                <!-- Recommended content will be populated by JavaScript -->
              </div>
            </section>
          </div>

          <!-- Search Page -->
          <div id="search" class="page">
            <div class="page-header">
              <h1 class="page-title">Search</h1>
              <div class="search-filters">
                <button class="filter-chip active">All</button>
                <button class="filter-chip">Artists</button>
                <button class="filter-chip">Songs</button>
                <button class="filter-chip">Albums</button>
                <button class="filter-chip">Playlists</button>
                <button class="filter-chip">Podcasts</button>
              </div>
            </div>

            <div id="search-results" class="search-results">
              <!-- Browse Categories -->
              <section class="section">
                <h2 class="section-title">Browse all</h2>
                <div class="cards-grid" id="browse-categories">
                  <!-- Categories will be populated by JavaScript -->
                </div>
              </section>
            </div>
          </div>

          <!-- Library Page -->
          <div id="library" class="page">
            <div class="page-header">
              <h1 class="page-title">Your Library</h1>
              <p class="page-subtitle">
                Your playlists, artists, albums, and podcasts
              </p>
            </div>

            <div class="search-filters">
              <button class="filter-chip active">Recently played</button>
              <button class="filter-chip">Recently added</button>
              <button class="filter-chip">Alphabetical</button>
              <button class="filter-chip">Creator</button>
            </div>

            <div id="library-content">
              <!-- Library content will be populated by JavaScript -->
            </div>
          </div>

          <!-- Premium Page -->
          <div id="premium" class="page">
            <div class="premium-banner">
              <h2>Get Premium Free for 1 month</h2>
              <p>
                Listen to music ad-free, offline, and with unlimited skips.
                Cancel anytime.
              </p>
              <button class="premium-btn">Get Premium Free</button>
            </div>

            <div class="feature-grid">
              <div class="feature-card">
                <h3> Ad-free music listening</h3>
                <p>
                  Enjoy uninterrupted music. No ads, no interruptions. Just pure
                  music.
                </p>
              </div>
              <div class="feature-card">
                <h3> Offline download</h3>
                <p>
                  Download music and listen anywhere. Perfect for commutes and
                  travel.
                </p>
              </div>
              <div class="feature-card">
                <h3> Unlimited skips</h3>
                <p>Skip any song, anytime. Don't like it? Skip it instantly.</p>
              </div>
              <div class="feature-card">
                <h3> High quality audio</h3>
                <p>Experience music in crystal clear quality up to 320 kbps.</p>
              </div>
            </div>
          </div>

          <!-- Profile Page -->
          <div id="profile" class="page">
            <div class="profile-header">
              <img
                src="https://picsum.photos/160/160?random=profile"
                alt="Profile"
                class="profile-image"
              />
              <div class="profile-info">
                <p class="profile-meta">Profile</p>
                <h1>John Doe</h1>
                <p class="profile-meta">
                  0 Public playlists  12 Following  5 Followers
                </p>
              </div>
            </div>

            <section class="section">
              <h2 class="section-title">Public playlists</h2>
              <p style="color: rgba(255, 255, 255, 0.6)">
                Nothing to show here.
              </p>
            </section>

            <section class="section">
              <h2 class="section-title">Recently played</h2>
              <div class="cards-grid" id="recent-played">
                <!-- Recent content will be populated by JavaScript -->
              </div>
            </section>
          </div>

          <!-- Browse Page -->
          <div id="browse" class="page">
            <div class="page-header">
              <h1 class="page-title">Browse</h1>
              <p class="page-subtitle">
                Discover new music, podcasts, and genres
              </p>
            </div>

            <section class="section">
              <h2 class="section-title">Featured</h2>
              <div class="cards-grid" id="featured-content">
                <!-- Featured content will be populated by JavaScript -->
              </div>
            </section>

            <section class="section">
              <h2 class="section-title">Genres & Moods</h2>
              <div class="cards-grid" id="genres-grid">
                <!-- Genres will be populated by JavaScript -->
              </div>
            </section>
          </div>

          <!-- Podcasts Page -->
          <div id="podcasts" class="page">
            <div class="page-header">
              <h1 class="page-title">Podcasts</h1>
              <p class="page-subtitle">Discover podcasts on every topic</p>
            </div>

            <section class="section">
              <h2 class="section-title">Popular podcasts</h2>
              <div class="cards-grid" id="popular-podcasts">
                <!-- Popular podcasts will be populated by JavaScript -->
              </div>
            </section>

            <section class="section">
              <h2 class="section-title">Trending episodes</h2>
              <div class="trending-list" id="trending-episodes">
                <!-- Trending episodes will be populated by JavaScript -->
              </div>
            </section>
          </div>

          <!-- Playlists Page -->
          <div id="playlists" class="page">
            <div class="page-header">
              <h1 class="page-title">Your Playlists</h1>
              <p class="page-subtitle">Created by you  1 playlist</p>
            </div>

            <div style="margin-bottom: 24px">
              <button
                class="btn btn-primary"
                onclick="createPlaylist()"
                style="margin-right: 12px"
              >
                Create Playlist
              </button>
              <button class="btn btn-secondary" onclick="importPlaylist()">
                Import Playlist
              </button>
            </div>

            <div id="playlists-content">
              <!-- Playlists will be populated by JavaScript -->
            </div>
          </div>

          <!-- Settings Page -->
          <div id="settings" class="page">
            <div class="page-header">
              <h1 class="page-title">Settings</h1>
              <p class="page-subtitle">Manage your account and preferences</p>
            </div>

            <section class="section">
              <h2 class="section-title">Account</h2>
              <div class="feature-grid">
                <div class="feature-card">
                  <h3> Privacy Settings</h3>
                  <p>Control who can see your activity and playlists</p>
                  <button
                    class="btn btn-secondary"
                    style="margin-top: 12px"
                    onclick="showNotification('Privacy settings opened')"
                  >
                    Manage Privacy
                  </button>
                </div>
                <div class="feature-card">
                  <h3> Notifications</h3>
                  <p>Choose what notifications you want to receive</p>
                  <button
                    class="btn btn-secondary"
                    style="margin-top: 12px"
                    onclick="showNotification('Notification settings opened')"
                  >
                    Edit Notifications
                  </button>
                </div>
                <div class="feature-card">
                  <h3> Music Quality</h3>
                  <p>Adjust streaming and download quality</p>
                  <button
                    class="btn btn-secondary"
                    style="margin-top: 12px"
                    onclick="showNotification('Audio settings opened')"
                  >
                    Audio Settings
                  </button>
                </div>
                <div class="feature-card">
                  <h3> Connected Apps</h3>
                  <p>Manage apps connected to your Spotify account</p>
                  <button
                    class="btn btn-secondary"
                    style="margin-top: 12px"
                    onclick="showNotification('Connected apps opened')"
                  >
                    View Apps
                  </button>
                </div>
              </div>
            </section>

            <section class="section">
              <h2 class="section-title">Playback</h2>
              <div class="feature-grid">
                <div class="feature-card">
                  <h3> Crossfade</h3>
                  <p>Seamless transitions between songs</p>
                  <div
                    style="
                      margin-top: 12px;
                      display: flex;
                      align-items: center;
                      gap: 12px;
                    "
                  >
                    <span style="font-size: 12px">0s</span>
                    <div class="volume-bar" style="flex: 1">
                      <div class="volume-fill" style="width: 30%"></div>
                    </div>
                    <span style="font-size: 12px">12s</span>
                  </div>
                </div>
                <div class="feature-card">
                  <h3> Normalize Volume</h3>
                  <p>Set the same volume level for all tracks</p>
                  <label
                    style="
                      display: flex;
                      align-items: center;
                      gap: 8px;
                      margin-top: 12px;
                    "
                  >
                    <input
                      type="checkbox"
                      checked
                      style="width: 16px; height: 16px"
                    />
                    <span>Enable volume normalization</span>
                  </label>
                </div>
              </div>
            </section>
          </div>

          <!-- Help Page -->
          <div id="help" class="page">
            <div class="page-header">
              <h1 class="page-title">Help & Support</h1>
              <p class="page-subtitle">Get help with your Spotify experience</p>
            </div>

            <section class="section">
              <h2 class="section-title">Popular Help Topics</h2>
              <div class="feature-grid">
                <div
                  class="feature-card"
                  style="cursor: pointer"
                  onclick="showNotification('Help article opened: Music won\'t play')"
                >
                  <h3> Music won't play</h3>
                  <p>Troubleshoot playback issues and streaming problems</p>
                </div>
                <div
                  class="feature-card"
                  style="cursor: pointer"
                  onclick="showNotification('Help article opened: Payment & Billing')"
                >
                  <h3> Payment & Billing</h3>
                  <p>Manage your subscription and payment methods</p>
                </div>
                <div
                  class="feature-card"
                  style="cursor: pointer"
                  onclick="showNotification('Help article opened: Download Music')"
                >
                  <h3> Download Music</h3>
                  <p>Learn how to download music for offline listening</p>
                </div>
                <div
                  class="feature-card"
                  style="cursor: pointer"
                  onclick="showNotification('Help article opened: Account Security')"
                >
                  <h3> Account Security</h3>
                  <p>Keep your account safe and secure</p>
                </div>
                <div
                  class="feature-card"
                  style="cursor: pointer"
                  onclick="showNotification('Help article opened: Playlists')"
                >
                  <h3> Playlists</h3>
                  <p>Create, edit, and share your playlists</p>
                </div>
                <div
                  class="feature-card"
                  style="cursor: pointer"
                  onclick="showNotification('Help article opened: Family Plan')"
                >
                  <h3> Family Plan</h3>
                  <p>Set up and manage your family subscription</p>
                </div>
              </div>
            </section>

            <section class="section">
              <h2 class="section-title">Contact Support</h2>
              <div style="max-width: 600px">
                <div class="feature-card">
                  <h3> Chat with us</h3>
                  <p>Get instant help from our support team</p>
                  <button
                    class="btn btn-primary"
                    style="margin-top: 12px"
                    onclick="showNotification('Chat support opened')"
                  >
                    Start Chat
                  </button>
                </div>
              </div>
            </section>

            <section class="section">
              <h2 class="section-title">Community</h2>
              <div class="feature-grid">
                <div
                  class="feature-card"
                  style="cursor: pointer"
                  onclick="showNotification('Opening community')"
                >
                  <h3> Spotify Community</h3>
                  <p>
                    Connect with other users and get help from the community
                  </p>
                </div>
                <div
                  class="feature-card"
                  style="cursor: pointer"
                  onclick="showNotification('Opening developers')"
                >
                  <h3> For Developers</h3>
                  <p>Build with Spotify's Web API and SDKs</p>
                </div>
              </div>
            </section>
          </div>

          <!-- About Page -->
          <div id="about" class="page">
            <div class="page-header">
              <h1 class="page-title">About Spotify</h1>
              <p class="page-subtitle">Music for everyone</p>
            </div>

            <section class="section">
              <div style="max-width: 800px; margin: 0 auto; text-align: center">
                <div style="margin-bottom: 40px">
                  <div
                    class="logo"
                    style="justify-content: center; margin-bottom: 24px"
                  >
                    <div class="logo-icon" style="width: 64px; height: 64px">
                      <div
                        style="
                          width: 32px;
                          height: 32px;
                          background-color: #000;
                          border-radius: 50%;
                        "
                      ></div>
                    </div>
                  </div>
                  <h2 style="font-size: 36px; margin-bottom: 16px">Spotify</h2>
                  <p
                    style="
                      font-size: 18px;
                      color: rgba(255, 255, 255, 0.7);
                      line-height: 1.6;
                    "
                  >
                    Spotify is a digital music service that gives you access to
                    millions of songs, podcasts and videos from artists all over
                    the world.
                  </p>
                </div>

                <div
                  class="feature-grid"
                  style="text-align: left; margin-bottom: 40px"
                >
                  <div class="feature-card">
                    <h3> The numbers</h3>
                    <p>Over 365 million monthly active users worldwide</p>
                  </div>
                  <div class="feature-card">
                    <h3> The music</h3>
                    <p>
                      Access to over 70 million songs and 4 billion playlists
                    </p>
                  </div>
                  <div class="feature-card">
                    <h3> Podcasts</h3>
                    <p>Over 4 million podcast titles available to stream</p>
                  </div>
                  <div class="feature-card">
                    <h3> Global reach</h3>
                    <p>Available in 184 markets around the world</p>
                  </div>
                </div>

                <div style="text-align: center">
                  <h3 style="margin-bottom: 16px">Learn More</h3>
                  <div
                    style="
                      display: flex;
                      gap: 16px;
                      justify-content: center;
                      flex-wrap: wrap;
                    "
                  >
                    <button
                      class="btn btn-secondary"
                      onclick="showNotification('Opening careers page')"
                    >
                      Careers
                    </button>
                    <button
                      class="btn btn-secondary"
                      onclick="showNotification('Opening investors page')"
                    >
                      For Investors
                    </button>
                    <button
                      class="btn btn-secondary"
                      onclick="showNotification('Opening vendors page')"
                    >
                      For Vendors
                    </button>
                    <button
                      class="btn btn-secondary"
                      onclick="showNotification('Opening press page')"
                    >
                      Press
                    </button>
                  </div>
                </div>
              </div>
            </section>
          </div>

          <!-- Liked Songs Page -->
          <div id="liked-songs" class="page">
            <div class="liked-songs-header">
              <div class="liked-songs-hero">
                <div class="liked-songs-artwork">
                  <div class="liked-songs-gradient">
                    <svg width="80" height="80" viewBox="0 0 80 80" fill="none">
                      <path
                        d="M40 10C52.5 10 70 17.5 70 40C70 62.5 52.5 70 40 70C17.5 70 10 52.5 10 40C10 17.5 17.5 10 40 10Z"
                        fill="white"
                      />
                      <path
                        d="M40 25L48 35H32L40 25Z"
                        fill="var(--spotify-green)"
                      />
                      <path
                        d="M33 40C33 42.5 35 45 40 45C45 45 47 42.5 47 40C47 37.5 45 35 40 35C35 35 33 37.5 33 40Z"
                        fill="var(--spotify-green)"
                      />
                    </svg>
                  </div>
                </div>
                <div class="liked-songs-info">
                  <p class="playlist-type">Playlist</p>
                  <h1 class="playlist-title">Liked Songs</h1>
                  <div class="playlist-meta">
                    <span class="playlist-owner">Made for you</span>
                    <span class="playlist-separator"></span>
                    <span class="playlist-count" id="liked-songs-count"
                      >42 songs</span
                    >
                  </div>
                </div>
              </div>

              <div class="playlist-actions">
                <button class="play-button-large" onclick="playLikedSongs()">
                  <svg class="icon-lg" viewBox="0 0 24 24">
                    <path fill="var(--spotify-black)" d="M8 5v14l11-7z" />
                  </svg>
                </button>
                <button
                  class="control-btn"
                  onclick="shuffleLikedSongs()"
                  title="Shuffle"
                >
                  <svg class="icon-lg" viewBox="0 0 24 24">
                    <path
                      fill="currentColor"
                      d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"
                    />
                  </svg>
                </button>
                <button
                  class="control-btn"
                  onclick="downloadLikedSongs()"
                  title="Download"
                >
                  <svg class="icon-lg" viewBox="0 0 24 24">
                    <path
                      fill="currentColor"
                      d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"
                    />
                  </svg>
                </button>
                <button class="control-btn" title="More options">
                  <svg class="icon-lg" viewBox="0 0 24 24">
                    <path
                      fill="currentColor"
                      d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"
                    />
                  </svg>
                </button>
              </div>
            </div>

            <div class="playlist-content">
              <div class="playlist-header-row">
                <div class="track-number-header">#</div>
                <div class="track-title-header">Title</div>
                <div class="track-album-header">Album</div>
                <div class="track-date-header">Date added</div>
                <div class="track-duration-header">
                  <svg class="icon-sm" viewBox="0 0 24 24">
                    <path
                      fill="currentColor"
                      d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
                    />
                  </svg>
                </div>
              </div>

              <div id="liked-songs-list" class="playlist-tracks">
                <!-- Liked songs will be populated by JavaScript -->
              </div>
            </div>
          </div>

          <!-- Now Playing Full Screen View -->
          <div id="now-playing" class="page">
            <div class="now-playing-fullscreen">
              <div class="now-playing-header">
                <button class="btn-icon" onclick="closeNowPlaying()">
                  <svg class="icon" viewBox="0 0 24 24">
                    <path
                      fill="currentColor"
                      d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
                    />
                  </svg>
                </button>
                <h2 class="now-playing-title">Now Playing</h2>
                <button class="btn-icon" onclick="toggleQueue()">
                  <svg class="icon" viewBox="0 0 24 24">
                    <path
                      fill="currentColor"
                      d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H8V4h12v12z"
                    />
                  </svg>
                </button>
              </div>

              <div class="now-playing-content">
                <div class="now-playing-artwork">
                  <img
                    id="fullscreen-cover"
                    src="https://picsum.photos/400/400?random=current"
                    alt="Album Art"
                    class="fullscreen-album-art"
                  />
                </div>

                <div class="now-playing-info-section">
                  <div class="now-playing-track-info">
                    <h1 id="fullscreen-title" class="fullscreen-track-title">
                      Choose a song to play
                    </h1>
                    <h2 id="fullscreen-artist" class="fullscreen-track-artist">
                      Select from above
                    </h2>
                  </div>

                  <div class="now-playing-actions">
                    <button class="control-btn">
                      <svg class="icon" viewBox="0 0 24 24">
                        <path
                          fill="currentColor"
                          d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"
                        />
                      </svg>
                    </button>
                    <button class="control-btn">
                      <svg class="icon" viewBox="0 0 24 24">
                        <path
                          fill="currentColor"
                          d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.50-.31 2.04-.81l7.05 4.11c-.05.23-.09.46-.09.7 0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3z"
                        />
                      </svg>
                    </button>
                    <button class="control-btn">
                      <svg class="icon" viewBox="0 0 24 24">
                        <path
                          fill="currentColor"
                          d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"
                        />
                      </svg>
                    </button>
                  </div>

                  <div class="fullscreen-controls">
                    <div class="fullscreen-progress">
                      <span class="progress-time" id="fullscreen-current-time"
                        >0:00</span
                      >
                      <div
                        class="progress-bar fullscreen-progress-bar"
                        id="fullscreen-progress-bar"
                      >
                        <div
                          class="progress-fill"
                          id="fullscreen-progress-fill"
                        >
                          <div class="progress-handle"></div>
                        </div>
                      </div>
                      <span class="progress-time" id="fullscreen-total-time"
                        >0:00</span
                      >
                    </div>

                    <div class="fullscreen-playback-controls">
                      <button class="control-btn" onclick="toggleShuffle()">
                        <svg class="icon" viewBox="0 0 24 24">
                          <path
                            fill="currentColor"
                            d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"
                          />
                        </svg>
                      </button>
                      <button class="control-btn" onclick="previousTrack()">
                        <svg class="icon-lg" viewBox="0 0 24 24">
                          <path
                            fill="currentColor"
                            d="M6 6h2v12H6zm3.5 6l8.5 6V6z"
                          />
                        </svg>
                      </button>
                      <button
                        class="control-btn play-pause fullscreen-play-btn"
                        onclick="togglePlayPause()"
                      >
                        <svg class="icon-lg" viewBox="0 0 24 24">
                          <path fill="var(--spotify-black)" d="M8 5v14l11-7z" />
                        </svg>
                      </button>
                      <button class="control-btn" onclick="nextTrack()">
                        <svg class="icon-lg" viewBox="0 0 24 24">
                          <path
                            fill="currentColor"
                            d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"
                          />
                        </svg>
                      </button>
                      <button class="control-btn" onclick="toggleRepeat()">
                        <svg class="icon" viewBox="0 0 24 24">
                          <path
                            fill="currentColor"
                            d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"
                          />
                        </svg>
                      </button>
                    </div>
                  </div>

                  <div class="fullscreen-volume">
                    <button class="control-btn">
                      <svg class="icon" viewBox="0 0 24 24">
                        <path
                          fill="currentColor"
                          d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"
                        />
                      </svg>
                    </button>
                    <div class="volume-bar fullscreen-volume-bar">
                      <div class="volume-fill"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Music Player -->
    <div class="music-player">
      <div class="player-left">
        <img
          src="https://picsum.photos/56/56?random=current"
          alt="Now Playing"
          class="now-playing-cover"
          id="current-cover"
          onclick="openNowPlaying()"
          style="cursor: pointer"
        />
        <div
          class="now-playing-info"
          onclick="openNowPlaying()"
          style="cursor: pointer"
        >
          <div class="now-playing-title" id="current-title">
            Choose a song to play
          </div>
          <div class="now-playing-artist" id="current-artist">
            Select from above
          </div>
        </div>
        <button class="control-btn">
          <svg class="icon-sm" viewBox="0 0 24 24">
            <path
              fill="currentColor"
              d="M12.39 12.98L10.5 15l-4.5-6h12l-5.61 7.02z"
            />
          </svg>
        </button>
        <button class="control-btn">
          <svg class="icon-sm" viewBox="0 0 24 24">
            <path
              fill="currentColor"
              d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"
            />
          </svg>
        </button>
      </div>

      <div class="player-controls">
        <div class="control-buttons">
          <button class="control-btn">
            <svg class="icon" viewBox="0 0 24 24">
              <path fill="currentColor" d="M6 6h2v12H6zm3.5 6l8.5 6V6z" />
            </svg>
          </button>
          <button class="control-btn">
            <svg class="icon" viewBox="0 0 24 24">
              <path
                fill="currentColor"
                d="M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z"
              />
            </svg>
          </button>
          <button class="control-btn play-pause" id="play-pause-btn">
            <svg class="icon-play" viewBox="0 0 24 24">
              <path fill="#000000" d="M8 5v14l11-7z" />
            </svg>
          </button>
          <button class="control-btn">
            <svg class="icon" viewBox="0 0 24 24">
              <path
                fill="currentColor"
                d="M13 6v12l8.5-6L13 6zM4 18l8.5-6L4 6v12z"
              />
            </svg>
          </button>
          <button class="control-btn">
            <svg class="icon" viewBox="0 0 24 24">
              <path fill="currentColor" d="M6 6h2v12H6zm3.5 6l8.5 6V6z" />
            </svg>
          </button>
        </div>

        <div class="progress-container">
          <span class="progress-time" id="current-time">0:00</span>
          <div class="progress-bar" id="progress-bar">
            <div class="progress-fill" id="progress-fill">
              <div class="progress-handle"></div>
            </div>
          </div>
          <span class="progress-time" id="total-time">0:00</span>
        </div>
      </div>

      <div class="player-right">
        <button class="control-btn">
          <svg class="icon" viewBox="0 0 24 24">
            <path
              fill="currentColor"
              d="M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z"
            />
          </svg>
        </button>
        <button class="control-btn">
          <svg class="icon" viewBox="0 0 24 24">
            <path
              fill="currentColor"
              d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
            />
          </svg>
        </button>
        <div class="volume-container">
          <button class="control-btn">
            <svg class="icon" viewBox="0 0 24 24">
              <path
                fill="currentColor"
                d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"
              />
            </svg>
          </button>
          <div class="volume-bar">
            <div class="volume-fill"></div>
          </div>
        </div>
        <button
          class="control-btn"
          onclick="openDeviceMenu()"
          title="Connect to a device"
        >
          <svg class="icon" viewBox="0 0 24 24">
            <path
              fill="currentColor"
              d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"
            />
          </svg>
        </button>
      </div>
    </div>

    <!-- Authentication Modal -->
    <div id="auth-modal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title" id="auth-title">Log in to Spotify</h2>
          <button class="modal-close" onclick="closeAuthModal()">
            <svg class="icon" viewBox="0 0 24 24">
              <path
                fill="currentColor"
                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
              />
            </svg>
          </button>
        </div>
        <form id="auth-form">
          <div class="form-group">
            <label class="form-label">Email or username</label>
            <input
              type="text"
              class="form-input"
              placeholder="Email or username"
              required
            />
          </div>
          <div class="form-group">
            <label class="form-label">Password</label>
            <input
              type="password"
              class="form-input"
              placeholder="Password"
              required
            />
          </div>
          <div class="form-group">
            <button
              type="submit"
              class="btn btn-primary"
              style="width: 100%; padding: 16px"
            >
              <span id="auth-submit-text">Log In</span>
            </button>
          </div>
        </form>
        <hr
          style="
            border: none;
            height: 1px;
            background-color: rgba(255, 255, 255, 0.1);
            margin: 24px 0;
          "
        />
        <p style="text-align: center; color: rgba(255, 255, 255, 0.7)">
          <span id="auth-switch-text">Don't have an account?</span>
          <button
            type="button"
            style="
              background: none;
              border: none;
              color: #1db954;
              cursor: pointer;
              text-decoration: underline;
            "
            onclick="switchAuthMode()"
          >
            <span id="auth-switch-btn">Sign up for Spotify</span>
          </button>
        </p>
      </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification">
      <span id="notification-text">Success!</span>
    </div>

    <!-- Global Loading Indicator -->
    <div
      id="global-loading"
      class="hidden"
      style="
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(18, 18, 18, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 4000;
      "
    >
      <div class="loading-container">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading...</div>
      </div>
    </div>

    <!-- Context Menu -->
    <div id="context-menu" class="context-menu hidden">
      <div
        class="context-menu-item"
        onclick="contextMenuAction('add-to-queue')"
      >
        <svg class="icon-sm" viewBox="0 0 24 24">
          <path
            fill="currentColor"
            d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H8V4h12v12z"
          />
        </svg>
        Add to queue
      </div>
      <div
        class="context-menu-item context-menu-submenu"
        onclick="contextMenuAction('add-to-playlist')"
      >
        <svg class="icon-sm" viewBox="0 0 24 24">
          <path
            fill="currentColor"
            d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h8c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"
          />
        </svg>
        Add to playlist
      </div>
      <div class="context-menu-separator"></div>
      <div class="context-menu-item" onclick="contextMenuAction('like')">
        <svg class="icon-sm" viewBox="0 0 24 24">
          <path
            fill="currentColor"
            d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
          />
        </svg>
        <span id="context-like-text">Save to your Liked Songs</span>
      </div>
      <div class="context-menu-item" onclick="contextMenuAction('download')">
        <svg class="icon-sm" viewBox="0 0 24 24">
          <path
            fill="currentColor"
            d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"
          />
        </svg>
        Download
      </div>
      <div class="context-menu-separator"></div>
      <div
        class="context-menu-item"
        onclick="contextMenuAction('go-to-artist')"
      >
        <svg class="icon-sm" viewBox="0 0 24 24">
          <path
            fill="currentColor"
            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"
          />
        </svg>
        Go to artist
      </div>
      <div class="context-menu-item" onclick="contextMenuAction('go-to-album')">
        <svg class="icon-sm" viewBox="0 0 24 24">
          <path
            fill="currentColor"
            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
          />
        </svg>
        Go to album
      </div>
      <div class="context-menu-separator"></div>
      <div class="context-menu-item" onclick="contextMenuAction('share')">
        <svg class="icon-sm" viewBox="0 0 24 24">
          <path
            fill="currentColor"
            d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.50-.31 2.04-.81l7.05 4.11c-.05.23-.09.46-.09.7 0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3z"
          />
        </svg>
        Share
      </div>
    </div>

    <!-- Device Management Modal -->
    <div id="device-modal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">Connect to a device</h2>
          <button class="modal-close" onclick="closeDeviceModal()">
            <svg class="icon" viewBox="0 0 24 24">
              <path
                fill="currentColor"
                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
              />
            </svg>
          </button>
        </div>

        <div style="margin-bottom: 24px">
          <div
            style="
              display: flex;
              align-items: center;
              gap: 8px;
              margin-bottom: 16px;
            "
          >
            <svg
              class="icon"
              viewBox="0 0 24 24"
              style="color: var(--spotify-green)"
            >
              <path fill="currentColor" d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
            </svg>
            <span style="color: var(--spotify-green); font-weight: 500"
              >Listening on this web browser</span
            >
          </div>
          <p style="color: var(--spotify-text-secondary); font-size: 14px">
            Spotify is currently playing on this device.
          </p>
        </div>

        <div>
          <h3 style="margin-bottom: 16px; font-size: 16px; font-weight: 600">
            Select a device
          </h3>
          <div id="device-list">
            <!-- Devices will be populated by JavaScript -->
          </div>
        </div>

        <div
          style="
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid var(--spotify-border);
          "
        >
          <p
            style="
              color: var(--spotify-text-secondary);
              font-size: 12px;
              margin-bottom: 8px;
            "
          >
            Don't see your device?
          </p>
          <div style="display: flex; gap: 12px">
            <button
              class="btn btn-secondary"
              style="font-size: 12px; padding: 8px 16px"
              onclick="refreshDevices()"
            >
              Refresh
            </button>
            <button
              class="btn btn-secondary"
              style="font-size: 12px; padding: 8px 16px"
              onclick="showNotification('Download the Spotify app on your device')"
            >
              Learn how
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Application State
      const state = {
        currentPage: "home",
        currentTrack: null,
        isPlaying: false,
        authMode: "login", // 'login' or 'signup'
        user: null,
        queue: [],
        shuffle: false,
        repeat: "off", // 'off', 'track', 'context'
        volume: 0.7,
        offline: false,
        navigationHistory: ["home"],
        currentHistoryIndex: 0,
        breadcrumbs: [],
        playlists: [
          {
            id: 1,
            name: "Liked Songs",
            image: "https://picsum.photos/48/48?random=liked",
            meta: "Playlist  42 songs",
            tracks: 42,
          },
        ],
        recentPlaylists: [],
      };

      // Mock Data
      const mockData = {
        trendingSongs: [
          {
            id: 1,
            image: "https://picsum.photos/40/40?random=1",
            title: "Blinding Lights",
            artist: "The Weeknd",
            duration: "3:20",
            plays: 2547891234,
          },
          {
            id: 2,
            image: "https://picsum.photos/40/40?random=2",
            title: "Watermelon Sugar",
            artist: "Harry Styles",
            duration: "2:54",
            plays: 1876543210,
          },
          {
            id: 3,
            image: "https://picsum.photos/40/40?random=3",
            title: "Levitating",
            artist: "Dua Lipa",
            duration: "3:23",
            plays: 1654321987,
          },
          {
            id: 4,
            image: "https://picsum.photos/40/40?random=4",
            title: "Good 4 U",
            artist: "Olivia Rodrigo",
            duration: "2:58",
            plays: 1543210876,
          },
          {
            id: 5,
            image: "https://picsum.photos/40/40?random=5",
            title: "Stay",
            artist: "The Kid LAROI, Justin Bieber",
            duration: "2:21",
            plays: 1432109765,
          },
        ],

        popularArtists: [
          {
            id: 1,
            image: "https://picsum.photos/200/200?random=6",
            name: "Taylor Swift",
            followers: "74M followers",
          },
          {
            id: 2,
            image: "https://picsum.photos/200/200?random=7",
            name: "Drake",
            followers: "68M followers",
          },
          {
            id: 3,
            image: "https://picsum.photos/200/200?random=8",
            name: "Billie Eilish",
            followers: "61M followers",
          },
          {
            id: 4,
            image: "https://picsum.photos/200/200?random=9",
            name: "Ed Sheeran",
            followers: "58M followers",
          },
          {
            id: 5,
            image: "https://picsum.photos/200/200?random=10",
            name: "Ariana Grande",
            followers: "54M followers",
          },
          {
            id: 6,
            image: "https://picsum.photos/200/200?random=11",
            name: "Post Malone",
            followers: "47M followers",
          },
        ],

        popularAlbums: [
          {
            id: 1,
            image: "https://picsum.photos/200/200?random=12",
            title: "Folklore",
            artist: "Taylor Swift",
            year: "2020",
          },
          {
            id: 2,
            image: "https://picsum.photos/200/200?random=13",
            title: "After Hours",
            artist: "The Weeknd",
            year: "2020",
          },
          {
            id: 3,
            image: "https://picsum.photos/200/200?random=14",
            title: "Future Nostalgia",
            artist: "Dua Lipa",
            year: "2020",
          },
          {
            id: 4,
            image: "https://picsum.photos/200/200?random=15",
            title: "Positions",
            artist: "Ariana Grande",
            year: "2020",
          },
          {
            id: 5,
            image: "https://picsum.photos/200/200?random=16",
            title: "Fine Line",
            artist: "Harry Styles",
            year: "2019",
          },
          {
            id: 6,
            image: "https://picsum.photos/200/200?random=17",
            title: "Sour",
            artist: "Olivia Rodrigo",
            year: "2021",
          },
        ],

        browseCategories: [
          {
            id: 1,
            title: "Pop",
            color: "#1db954",
            image: "https://picsum.photos/200/200?random=cat1",
          },
          {
            id: 2,
            title: "Hip-Hop",
            color: "#e61e32",
            image: "https://picsum.photos/200/200?random=cat2",
          },
          {
            id: 3,
            title: "Rock",
            color: "#8400e7",
            image: "https://picsum.photos/200/200?random=cat3",
          },
          {
            id: 4,
            title: "Latin",
            color: "#e8115b",
            image: "https://picsum.photos/200/200?random=cat4",
          },
          {
            id: 5,
            title: "Indie",
            color: "#148a08",
            image: "https://picsum.photos/200/200?random=cat5",
          },
          {
            id: 6,
            title: "Electronic",
            color: "#0d72ea",
            image: "https://picsum.photos/200/200?random=cat6",
          },
          {
            id: 7,
            title: "Country",
            color: "#bc5900",
            image: "https://picsum.photos/200/200?random=cat7",
          },
          {
            id: 8,
            title: "R&B",
            color: "#477d95",
            image: "https://picsum.photos/200/200?random=cat8",
          },
        ],

        podcasts: [
          {
            id: 1,
            image: "https://picsum.photos/200/200?random=pod1",
            title: "The Joe Rogan Experience",
            host: "Joe Rogan",
            description: "Conversations with interesting people",
          },
          {
            id: 2,
            image: "https://picsum.photos/200/200?random=pod2",
            title: "Crime Junkie",
            host: "Ashley Flowers",
            description: "True crime podcast",
          },
          {
            id: 3,
            image: "https://picsum.photos/200/200?random=pod3",
            title: "This American Life",
            host: "Ira Glass",
            description: "Stories of American life",
          },
          {
            id: 4,
            image: "https://picsum.photos/200/200?random=pod4",
            title: "Serial",
            host: "Sarah Koenig",
            description: "Investigative journalism",
          },
        ],

        recommended: [
          {
            id: 1,
            image: "https://picsum.photos/200/200?random=rec1",
            title: "Discover Weekly",
            description: "Your weekly mixtape of fresh music",
          },
          {
            id: 2,
            image: "https://picsum.photos/200/200?random=rec2",
            title: "Release Radar",
            description: "New releases from artists you follow",
          },
          {
            id: 3,
            image: "https://picsum.photos/200/200?random=rec3",
            title: "Daily Mix 1",
            description: "Taylor Swift, Olivia Rodrigo, Billie Eilish and more",
          },
          {
            id: 4,
            image: "https://picsum.photos/200/200?random=rec4",
            title: "Daily Mix 2",
            description: "The Weeknd, Drake, Post Malone and more",
          },
        ],
      };

      // Navigation Functions
      function navigateTo(page) {
        // Don't navigate if already on the page
        if (state.currentPage === page) return;

        // Show loading for significant page changes
        if (
          ["search", "library", "browse", "podcasts", "liked-songs"].includes(
            page,
          )
        ) {
          showPageLoading(`Loading ${page.replace("-", " ")}...`);
        }

        // Hide current page
        document.querySelector(".page.active")?.classList.remove("active");

        // Show new page
        const newPage = document.getElementById(page);
        if (newPage) {
          newPage.classList.add("active");
          state.currentPage = page;

          // Update navigation history
          updateNavigationHistory(page);

          // Update navigation
          updateNavigation();

          // Load page content
          loadPageContent(page);

          // Hide loading after content loads
          if (
            ["search", "library", "browse", "podcasts", "liked-songs"].includes(
              page,
            )
          ) {
            setTimeout(hidePageLoading, 1200);
          }
        }
      }

      function updateNavigation() {
        // Update header nav buttons
        document.querySelectorAll(".nav-btn").forEach((btn) => {
          btn.classList.remove("active");
          if (btn.dataset.page === state.currentPage) {
            btn.classList.add("active");
          }
        });

        // Update sidebar nav
        document.querySelectorAll(".sidebar-nav-link").forEach((link) => {
          link.classList.remove("active");
          if (link.dataset.page === state.currentPage) {
            link.classList.add("active");
          }
        });
      }

      function loadPageContent(page) {
        switch (page) {
          case "home":
            populateHomePage();
            break;
          case "search":
            populateSearchPage();
            break;
          case "library":
            populateLibraryPage();
            break;
          case "browse":
            populateBrowsePage();
            break;
          case "podcasts":
            populatePodcastsPage();
            break;
          case "playlists":
            populatePlaylistsPage();
            break;
          case "profile":
            populateProfilePage();
            break;
          case "liked-songs":
            populateLikedSongsPage();
            break;
        }
      }

      // Content Population Functions
      function populateHomePage() {
        populateTrendingSongs();
        populateArtists();
        populateAlbums();
        populateRecommended();
      }

      function populateTrendingSongs() {
        const container = document.getElementById("trending-list");
        if (!container) return;

        // Show loading skeleton
        showTrendingSkeletonScreen(container);

        // Simulate loading delay
        setTimeout(() => {
          container.innerHTML = "";
          populateTrendingSongsContent(container);
        }, 500);
      }

      function showTrendingSkeletonScreen(container) {
        container.innerHTML = "";
        for (let i = 0; i < 5; i++) {
          const skeletonItem = document.createElement("div");
          skeletonItem.className = "skeleton-track";
          skeletonItem.innerHTML = `
            <div class="skeleton-track-cover skeleton"></div>
            <div class="skeleton-track-info">
              <div class="skeleton-track-title skeleton"></div>
              <div class="skeleton-track-artist skeleton"></div>
            </div>
            <div class="skeleton-track-duration skeleton"></div>
          `;
          container.appendChild(skeletonItem);
        }
      }

      function populateTrendingSongsContent(container) {
        mockData.trendingSongs.forEach((song, index) => {
          const item = document.createElement("div");
          item.className = "trending-item";
          item.innerHTML = `
            <span class="track-number">${index + 1}</span>
            <button class="trending-play-btn" onclick="playTrack(${song.id})">
              <svg class="icon-sm" viewBox="0 0 24 24">
                <path fill="currentColor" d="M8 5v14l11-7z"/>
              </svg>
            </button>
            <img src="${song.image}" alt="${song.title}" class="trending-cover">
            <div class="trending-info">
              <div class="trending-title">${song.title}</div>
              <div class="trending-artist">${song.artist}</div>
            </div>
            <div class="trending-actions">
              <button class="control-btn" onclick="toggleLike(${song.id})">
                <svg class="icon-sm" viewBox="0 0 24 24">
                  <path fill="currentColor" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                </svg>
              </button>
              <span class="trending-duration">${song.duration}</span>
              <button class="control-btn" onclick="showContextMenu(event, ${song.id})">
                <svg class="icon-sm" viewBox="0 0 24 24">
                  <path fill="currentColor" d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                </svg>
              </button>
            </div>
          `;
          item.onclick = () => playTrack(song.id);
          item.oncontextmenu = (e) => showContextMenu(e, song.id);
          container.appendChild(item);
        });
      }

      function populateArtists() {
        const container = document.getElementById("artists-grid");
        if (!container) return;

        // Show loading skeleton
        showArtistsSkeletonScreen(container);

        // Simulate loading delay
        setTimeout(() => {
          container.innerHTML = "";
          populateArtistsContent(container);
        }, 800);
      }

      function showArtistsSkeletonScreen(container) {
        container.innerHTML = "";
        for (let i = 0; i < 6; i++) {
          const skeletonCard = document.createElement("div");
          skeletonCard.className = "skeleton-card";
          skeletonCard.innerHTML = `
            <div class="skeleton-image round skeleton"></div>
            <div class="skeleton-text skeleton"></div>
            <div class="skeleton-text small skeleton"></div>
          `;
          container.appendChild(skeletonCard);
        }
      }

      function populateArtistsContent(container) {
        mockData.popularArtists.forEach((artist) => {
          const card = document.createElement("div");
          card.className = "card";
          card.innerHTML = `
            <img src="${artist.image}" alt="${artist.name}" class="card-image artist-image">
            <div class="card-title">${artist.name}</div>
            <div class="card-subtitle">${artist.followers}</div>
            <button class="play-button" onclick="playArtist(${artist.id})">
              <svg class="icon-play" viewBox="0 0 24 24">
                <path fill="currentColor" d="M8 5v14l11-7z"/>
              </svg>
            </button>
          `;
          card.onclick = () => navigateToArtist(artist.id);
          container.appendChild(card);
        });
      }

      function populateAlbums() {
        const container = document.getElementById("albums-grid");
        if (!container) return;

        // Show loading skeleton
        showAlbumsSkeletonScreen(container);

        // Simulate loading delay
        setTimeout(() => {
          container.innerHTML = "";
          populateAlbumsContent(container);
        }, 1000);
      }

      function showAlbumsSkeletonScreen(container) {
        container.innerHTML = "";
        for (let i = 0; i < 6; i++) {
          const skeletonCard = document.createElement("div");
          skeletonCard.className = "skeleton-card";
          skeletonCard.innerHTML = `
            <div class="skeleton-image skeleton"></div>
            <div class="skeleton-text skeleton"></div>
            <div class="skeleton-text small skeleton"></div>
          `;
          container.appendChild(skeletonCard);
        }
      }

      function populateAlbumsContent(container) {
        mockData.popularAlbums.forEach((album) => {
          const card = document.createElement("div");
          card.className = "card";
          card.innerHTML = `
            <img src="${album.image}" alt="${album.title}" class="card-image">
            <div class="card-title">${album.title}</div>
            <div class="card-subtitle">${album.year}  ${album.artist}</div>
            <button class="play-button" onclick="playAlbum(${album.id})">
              <svg class="icon-play" viewBox="0 0 24 24">
                <path fill="currentColor" d="M8 5v14l11-7z"/>
              </svg>
            </button>
          `;
          card.onclick = () => navigateToAlbum(album.id);
          container.appendChild(card);
        });
      }

      function populateRecommended() {
        const container = document.getElementById("recommended-grid");
        if (!container) return;

        container.innerHTML = "";

        mockData.recommended.forEach((item) => {
          const card = document.createElement("div");
          card.className = "card";
          card.innerHTML = `
            <img src="${item.image}" alt="${item.title}" class="card-image">
            <div class="card-title">${item.title}</div>
            <div class="card-subtitle">${item.description}</div>
            <button class="play-button" onclick="playPlaylist(${item.id})">
              <svg class="icon-play" viewBox="0 0 24 24">
                <path fill="currentColor" d="M8 5v14l11-7z"/>
              </svg>
            </button>
          `;
          container.appendChild(item);
        });
      }

      function populateSearchPage() {
        const container = document.getElementById("browse-categories");
        if (!container) return;

        container.innerHTML = "";

        mockData.browseCategories.forEach((category) => {
          const card = document.createElement("div");
          card.className = "card";
          card.style.background = category.color;
          card.innerHTML = `
            <img src="${category.image}" alt="${category.title}" class="card-image">
            <div class="card-title" style="color: #ffffff;">${category.title}</div>
          `;
          card.onclick = () => browseCategory(category.id);
          container.appendChild(card);
        });
      }

      function populateBrowsePage() {
        // Populate featured content
        const featuredContainer = document.getElementById("featured-content");
        if (featuredContainer) {
          featuredContainer.innerHTML = "";

          [
            ...mockData.popularAlbums.slice(0, 6),
            ...mockData.recommended.slice(0, 2),
          ].forEach((item) => {
            const card = document.createElement("div");
            card.className = "card";
            card.innerHTML = `
              <img src="${item.image}" alt="${item.title}" class="card-image">
              <div class="card-title">${item.title}</div>
              <div class="card-subtitle">${item.artist || item.description}</div>
              <button class="play-button">
                <svg class="icon-play" viewBox="0 0 24 24">
                  <path fill="currentColor" d="M8 5v14l11-7z"/>
                </svg>
              </button>
            `;
            featuredContainer.appendChild(card);
          });
        }

        // Populate genres
        const genresContainer = document.getElementById("genres-grid");
        if (genresContainer) {
          genresContainer.innerHTML = "";

          mockData.browseCategories.forEach((category) => {
            const card = document.createElement("div");
            card.className = "card";
            card.style.background = category.color;
            card.innerHTML = `
              <div class="card-title" style="color: #ffffff; margin-top: 80px;">${category.title}</div>
            `;
            card.onclick = () => browseCategory(category.id);
            genresContainer.appendChild(card);
          });
        }
      }

      function populatePodcastsPage() {
        const popularContainer = document.getElementById("popular-podcasts");
        if (popularContainer) {
          popularContainer.innerHTML = "";

          mockData.podcasts.forEach((podcast) => {
            const card = document.createElement("div");
            card.className = "card";
            card.innerHTML = `
              <img src="${podcast.image}" alt="${podcast.title}" class="card-image">
              <div class="card-title">${podcast.title}</div>
              <div class="card-subtitle">${podcast.host}</div>
              <button class="play-button">
                <svg class="icon-play" viewBox="0 0 24 24">
                  <path fill="currentColor" d="M8 5v14l11-7z"/>
                </svg>
              </button>
                        `;
            popularContainer.appendChild(card);
          });
        }

        const episodesContainer = document.getElementById("trending-episodes");
        if (episodesContainer) {
          episodesContainer.innerHTML = "";

          mockData.podcasts.forEach((podcast, index) => {
            const item = document.createElement("div");
            item.className = "trending-item";
            item.innerHTML = `
              <span class="track-number">${index + 1}</span>
              <img src="${podcast.image}" alt="${podcast.title}" class="trending-cover">
              <div class="trending-info">
                <div class="trending-title">Episode ${index + 123}: ${podcast.title}</div>
                <div class="trending-artist">${podcast.host}</div>
              </div>
              <div class="trending-actions">
                <span class="trending-duration">${45 + index * 5} min</span>
              </div>
            `;
            episodesContainer.appendChild(item);
          });
        }
      }

      function populatePlaylistsPage() {
        const container = document.getElementById("playlists-content");
        if (!container) return;

        container.innerHTML = "";

        state.playlists.forEach((playlist) => {
          const item = document.createElement("div");
          item.className = "playlist-item";
          item.innerHTML = `
            <img src="${playlist.image}" alt="${playlist.name}" class="playlist-cover">
            <div class="playlist-info">
              <div class="playlist-name">${playlist.name}</div>
              <div class="playlist-meta">${playlist.meta}</div>
            </div>
          `;
          item.onclick = () => openPlaylist(playlist.id);
          container.appendChild(item);
        });
      }

      function populateLibraryPage() {
        const container = document.getElementById("library-content");
        if (!container) return;

        container.innerHTML = "";

        // Add playlists, artists, albums, podcasts
        const allContent = [
          ...state.playlists,
          ...mockData.popularArtists.slice(0, 3),
          ...mockData.popularAlbums.slice(0, 3),
        ];

        allContent.forEach((item) => {
          const listItem = document.createElement("div");
          listItem.className = "playlist-item";
          listItem.innerHTML = `
            <img src="${item.image}" alt="${item.name || item.title}" class="playlist-cover">
            <div class="playlist-info">
              <div class="playlist-name">${item.name || item.title}</div>
              <div class="playlist-meta">${item.meta || item.followers || item.artist + "  " + item.year}</div>
            </div>
          `;
          container.appendChild(listItem);
        });
      }

      function populateRecentPlaylists() {
        const container = document.getElementById("recent-playlists");
        if (!container) return;

        container.innerHTML = "";

        state.recentPlaylists.slice(0, 6).forEach((playlist) => {
          const item = document.createElement("div");
          item.className = "playlist-item";
          item.innerHTML = `
            <img src="${playlist.image}" alt="${playlist.name}" class="playlist-cover">
            <div class="playlist-info">
              <div class="playlist-name">${playlist.name}</div>
              <div class="playlist-meta">${playlist.meta}</div>
            </div>
          `;
          item.onclick = () => openPlaylist(playlist.id);
          container.appendChild(item);
        });
      }

      // Music Player Functions
      function playTrack(trackId) {
        const track = mockData.trendingSongs.find((t) => t.id === trackId);
        if (track) {
          state.currentTrack = track;
          state.isPlaying = true;
          updatePlayer();
          showNotification(`Now playing: ${track.title}`);
        }
      }

      function playArtist(artistId) {
        const artist = mockData.popularArtists.find((a) => a.id === artistId);
        if (artist) {
          showNotification(`Playing ${artist.name}`);
        }
      }

      function playAlbum(albumId) {
        const album = mockData.popularAlbums.find((a) => a.id === albumId);
        if (album) {
          showNotification(`Playing ${album.title}`);
        }
      }

      function playPlaylist(playlistId) {
        showNotification("Playing playlist");
      }

      function togglePlayPause() {
        state.isPlaying = !state.isPlaying;
        updatePlayer();
      }

      function updatePlayer() {
        const playPauseBtn = document.getElementById("play-pause-btn");
        const currentTitle = document.getElementById("current-title");
        const currentArtist = document.getElementById("current-artist");
        const currentCover = document.getElementById("current-cover");

        if (state.currentTrack) {
          currentTitle.textContent = state.currentTrack.title;
          currentArtist.textContent = state.currentTrack.artist;
          currentCover.src = state.currentTrack.image;
          updateNowPlayingView();
        }

        if (playPauseBtn) {
          playPauseBtn.innerHTML = state.isPlaying
            ? '<svg class="icon-play" viewBox="0 0 24 24"><path fill="#000000" d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>'
            : '<svg class="icon-play" viewBox="0 0 24 24"><path fill="#000000" d="M8 5v14l11-7z"/></svg>';
        }
      }

      function nextTrack() {
        if (state.queue.length > 0) {
          const nextTrack = state.queue.shift();
          playTrack(nextTrack.id);
          showNotification(`Now playing: ${nextTrack.title}`);
        } else {
          showNotification("End of queue");
        }
      }

      function previousTrack() {
        showNotification("Previous track");
      }

      function toggleShuffle() {
        state.shuffle = !state.shuffle;
        showNotification(`Shuffle ${state.shuffle ? "on" : "off"}`);
        updatePlayer();
      }

      function toggleRepeat() {
        const modes = ["off", "context", "track"];
        const currentIndex = modes.indexOf(state.repeat);
        state.repeat = modes[(currentIndex + 1) % modes.length];

        const messages = {
          off: "Repeat off",
          context: "Repeat all",
          track: "Repeat track",
        };

        showNotification(messages[state.repeat]);
        updatePlayer();
      }

      function addToQueue(trackId) {
        const track = mockData.trendingSongs.find((t) => t.id === trackId);
        if (track) {
          state.queue.push(track);
          showNotification(`Added ${track.title} to queue`);
        }
      }

      function clearQueue() {
        state.queue = [];
        showNotification("Queue cleared");
      }

      function toggleOfflineMode() {
        state.offline = !state.offline;
        showNotification(
          `Offline mode ${state.offline ? "enabled" : "disabled"}`,
        );
      }

      function downloadForOffline(trackId) {
        showNotification("Downloaded for offline listening");
      }

      function openNowPlaying() {
        if (state.currentTrack) {
          navigateTo("now-playing");
          updateNowPlayingView();
        } else {
          showNotification("No track currently playing");
        }
      }

      function closeNowPlaying() {
        navigateTo("home");
      }

      function updateNowPlayingView() {
        if (state.currentTrack) {
          const fullscreenCover = document.getElementById("fullscreen-cover");
          const fullscreenTitle = document.getElementById("fullscreen-title");
          const fullscreenArtist = document.getElementById("fullscreen-artist");

          if (fullscreenCover)
            fullscreenCover.src = state.currentTrack.image.replace(
              "40/40",
              "400/400",
            );
          if (fullscreenTitle)
            fullscreenTitle.textContent = state.currentTrack.title;
          if (fullscreenArtist)
            fullscreenArtist.textContent = state.currentTrack.artist;
        }
      }

      function toggleQueue() {
        showNotification("Queue panel toggled");
      }

      // Device Management Functions
      const mockDevices = [
        {
          id: 1,
          name: "John's iPhone",
          type: "smartphone",
          isActive: false,
          volume: 80,
        },
        {
          id: 2,
          name: "Living Room Speaker",
          type: "speaker",
          isActive: false,
          volume: 60,
        },
        {
          id: 3,
          name: "MacBook Pro",
          type: "computer",
          isActive: false,
          volume: 90,
        },
        { id: 4, name: "Bedroom TV", type: "tv", isActive: false, volume: 40 },
      ];

      function openDeviceMenu() {
        const modal = document.getElementById("device-modal");
        modal.classList.remove("hidden");
        populateDeviceList();
      }

      function closeDeviceModal() {
        document.getElementById("device-modal").classList.add("hidden");
      }

      function populateDeviceList() {
        const container = document.getElementById("device-list");
        container.innerHTML = "";

        mockDevices.forEach((device) => {
          const deviceItem = document.createElement("div");
          deviceItem.className = "device-item";
          deviceItem.style.cssText = `
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-bottom: 8px;
          `;

          deviceItem.onmouseover = () => {
            deviceItem.style.backgroundColor =
              "var(--spotify-background-press)";
          };

          deviceItem.onmouseout = () => {
            deviceItem.style.backgroundColor = "transparent";
          };

          const deviceIcon = getDeviceIcon(device.type);

          deviceItem.innerHTML = `
            <div style="display: flex; align-items: center; gap: 12px;">
              ${deviceIcon}
              <div>
                <div style="font-weight: 500; color: var(--spotify-text-primary);">${device.name}</div>
                <div style="font-size: 12px; color: var(--spotify-text-secondary);">${getDeviceTypeLabel(device.type)}</div>
              </div>
            </div>
            <div style="display: flex; align-items: center; gap: 8px;">
              <div style="width: 60px; height: 4px; background-color: var(--spotify-border); border-radius: 2px; position: relative;">
                <div style="width: ${device.volume}%; height: 100%; background-color: var(--spotify-green); border-radius: 2px;"></div>
              </div>
              <span style="font-size: 12px; color: var(--spotify-text-secondary); min-width: 30px;">${device.volume}%</span>
            </div>
          `;

          deviceItem.onclick = () => switchToDevice(device);
          container.appendChild(deviceItem);
        });
      }

      function getDeviceIcon(type) {
        const icons = {
          smartphone:
            '<svg class="icon" viewBox="0 0 24 24" style="color: var(--spotify-text-secondary);"><path fill="currentColor" d="M17 2H7c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 18H7V4h10v16z"/></svg>',
          speaker:
            '<svg class="icon" viewBox="0 0 24 24" style="color: var(--spotify-text-secondary);"><path fill="currentColor" d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/></svg>',
          computer:
            '<svg class="icon" viewBox="0 0 24 24" style="color: var(--spotify-text-secondary);"><path fill="currentColor" d="M20 3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h3l-1 1v2h12v-2l-1-1h3c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 13H4V5h16v11z"/></svg>',
          tv: '<svg class="icon" viewBox="0 0 24 24" style="color: var(--spotify-text-secondary);"><path fill="currentColor" d="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5l-1 1v2h8v-2l-1-1h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12H3V5h18v10z"/></svg>',
        };
        return icons[type] || icons.computer;
      }

      function getDeviceTypeLabel(type) {
        const labels = {
          smartphone: "Spotify Mobile",
          speaker: "Speaker",
          computer: "Spotify Desktop",
          tv: "Spotify TV",
        };
        return labels[type] || "Spotify";
      }

      function switchToDevice(device) {
        mockDevices.forEach((d) => (d.isActive = false));
        device.isActive = true;
        showNotification(`Switched to ${device.name}`);
        closeDeviceModal();
      }

      function refreshDevices() {
        showNotification("Refreshing devices...");
        setTimeout(() => {
          populateDeviceList();
          showNotification("Devices refreshed");
        }, 1000);
      }

      // Liked Songs Functions
      const likedSongsData = [
        {
          id: 1,
          title: "Blinding Lights",
          artist: "The Weeknd",
          album: "After Hours",
          image: "https://picsum.photos/40/40?random=1",
          duration: "3:20",
          dateAdded: "5 days ago",
        },
        {
          id: 2,
          title: "Watermelon Sugar",
          artist: "Harry Styles",
          album: "Fine Line",
          image: "https://picsum.photos/40/40?random=2",
          duration: "2:54",
          dateAdded: "1 week ago",
        },
        {
          id: 3,
          title: "Levitating",
          artist: "Dua Lipa",
          album: "Future Nostalgia",
          image: "https://picsum.photos/40/40?random=3",
          duration: "3:23",
          dateAdded: "2 weeks ago",
        },
        {
          id: 4,
          title: "Good 4 U",
          artist: "Olivia Rodrigo",
          album: "SOUR",
          image: "https://picsum.photos/40/40?random=4",
          duration: "2:58",
          dateAdded: "3 weeks ago",
        },
        {
          id: 5,
          title: "Stay",
          artist: "The Kid LAROI, Justin Bieber",
          album: "F*CK LOVE 3: OVER YOU",
          image: "https://picsum.photos/40/40?random=5",
          duration: "2:21",
          dateAdded: "1 month ago",
        },
      ];

      function populateLikedSongsPage() {
        updateLikedSongsCount();
        populateLikedSongsList();
      }

      function updateLikedSongsCount() {
        const countElement = document.getElementById("liked-songs-count");
        if (countElement) {
          countElement.textContent = `${likedSongsData.length} songs`;
        }
      }

      function populateLikedSongsList() {
        const container = document.getElementById("liked-songs-list");
        if (!container) return;

        // Show loading skeleton
        showLikedSongsSkeletonScreen(container);

        // Simulate loading delay
        setTimeout(() => {
          container.innerHTML = "";
          populateLikedSongsContent(container);
        }, 600);
      }

      function showLikedSongsSkeletonScreen(container) {
        container.innerHTML = "";
        for (let i = 0; i < 5; i++) {
          const skeletonItem = document.createElement("div");
          skeletonItem.className = "playlist-track-item";
          skeletonItem.innerHTML = `
            <div style="width: 20px; height: 12px;" class="skeleton"></div>
            <div style="display: flex; align-items: center; gap: 12px;">
              <div class="skeleton-track-cover skeleton"></div>
              <div style="flex: 1;">
                <div style="height: 16px; width: 70%; margin-bottom: 4px;" class="skeleton"></div>
                <div style="height: 12px; width: 50%;" class="skeleton"></div>
              </div>
            </div>
            <div style="width: 120px; height: 12px;" class="skeleton"></div>
            <div style="width: 80px; height: 12px;" class="skeleton"></div>
            <div style="width: 40px; height: 12px;" class="skeleton"></div>
          `;
          container.appendChild(skeletonItem);
        }
      }

      function populateLikedSongsContent(container) {
        likedSongsData.forEach((song, index) => {
          const trackItem = document.createElement("div");
          trackItem.className = "playlist-track-item";
          trackItem.innerHTML = `
            <div class="track-number">${index + 1}</div>
            <button class="track-play-btn" onclick="playTrack(${song.id})">
              <svg class="icon-sm" viewBox="0 0 24 24">
                <path fill="currentColor" d="M8 5v14l11-7z"/>
              </svg>
            </button>
            <div class="track-info">
              <img src="${song.image}" alt="${song.title}" class="track-cover">
              <div class="track-details">
                <div class="track-name">${song.title}</div>
                <div class="track-artist">${song.artist}</div>
              </div>
            </div>
            <div class="track-album">${song.album}</div>
            <div class="track-date">${song.dateAdded}</div>
            <div class="track-duration">${song.duration}</div>
          `;

          trackItem.onclick = (e) => {
            if (!e.target.closest(".track-play-btn")) {
              playTrack(song.id);
            }
          };

          trackItem.oncontextmenu = (e) => {
            showContextMenu(e, song.id);
          };

          container.appendChild(trackItem);
        });
      }

      function playLikedSongs() {
        if (likedSongsData.length > 0) {
          playTrack(likedSongsData[0].id);
          showNotification("Playing Liked Songs");
        }
      }

      function shuffleLikedSongs() {
        if (likedSongsData.length > 0) {
          const randomIndex = Math.floor(Math.random() * likedSongsData.length);
          playTrack(likedSongsData[randomIndex].id);
          showNotification("Shuffling Liked Songs");
        }
      }

      function downloadLikedSongs() {
        showNotification("Downloading Liked Songs for offline listening");
      }

      // Context Menu Functions
      let currentContextTrack = null;

      function showContextMenu(event, trackId) {
        event.preventDefault();
        event.stopPropagation();

        const contextMenu = document.getElementById("context-menu");
        const track =
          mockData.trendingSongs.find((t) => t.id === trackId) ||
          likedSongsData.find((t) => t.id === trackId);

        if (!track) return;

        currentContextTrack = track;

        // Update like text based on current state
        const likeText = document.getElementById("context-like-text");
        const isLiked = likedSongsData.some((t) => t.id === trackId);
        likeText.textContent = isLiked
          ? "Remove from your Liked Songs"
          : "Save to your Liked Songs";

        // Position the menu
        const rect = contextMenu.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;

        let x = event.clientX;
        let y = event.clientY;

        // Adjust position if menu would go off screen
        if (x + 200 > viewportWidth) x = viewportWidth - 200;
        if (y + 300 > viewportHeight) y = viewportHeight - 300;

        contextMenu.style.left = x + "px";
        contextMenu.style.top = y + "px";

        // Show menu
        contextMenu.classList.remove("hidden");
        setTimeout(() => contextMenu.classList.add("show"), 10);

        // Add click listener to close menu
        document.addEventListener("click", hideContextMenu, { once: true });
      }

      function hideContextMenu() {
        const contextMenu = document.getElementById("context-menu");
        contextMenu.classList.remove("show");
        setTimeout(() => {
          contextMenu.classList.add("hidden");
          currentContextTrack = null;
        }, 150);
      }

      function contextMenuAction(action) {
        if (!currentContextTrack) return;

        const track = currentContextTrack;

        switch (action) {
          case "add-to-queue":
            addToQueue(track.id);
            break;
          case "add-to-playlist":
            showNotification("Add to playlist feature coming soon!");
            break;
          case "like":
            toggleLike(track.id);
            break;
          case "download":
            downloadForOffline(track.id);
            break;
          case "go-to-artist":
            showNotification(`Going to ${track.artist}`);
            break;
          case "go-to-album":
            showNotification(`Going to album`);
            break;
          case "share":
            showNotification("Share feature coming soon!");
            break;
        }

        hideContextMenu();
      }

      // Loading State Functions
      function showGlobalLoading() {
        const loadingElement = document.getElementById("global-loading");
        loadingElement.classList.remove("hidden");
      }

      function hideGlobalLoading() {
        const loadingElement = document.getElementById("global-loading");
        loadingElement.classList.add("hidden");
      }

      function showPageLoading(message = "Loading...") {
        showGlobalLoading();
        const loadingText = document.querySelector(
          "#global-loading .loading-text",
        );
        if (loadingText) loadingText.textContent = message;
      }

      function hidePageLoading() {
        setTimeout(hideGlobalLoading, 300); // Small delay for better UX
      }

      // Navigation History Functions
      function updateNavigationHistory(page) {
        // Remove any forward history if we're navigating from middle of history
        if (state.currentHistoryIndex < state.navigationHistory.length - 1) {
          state.navigationHistory = state.navigationHistory.slice(
            0,
            state.currentHistoryIndex + 1,
          );
        }

        // Add new page to history
        state.navigationHistory.push(page);
        state.currentHistoryIndex = state.navigationHistory.length - 1;

        updateNavigationButtons();
        updateBreadcrumbs();
      }

      function goBack() {
        if (state.currentHistoryIndex > 0) {
          state.currentHistoryIndex--;
          const page = state.navigationHistory[state.currentHistoryIndex];
          navigateToWithoutHistory(page);
          updateNavigationButtons();
          updateBreadcrumbs();
        }
      }

      function goForward() {
        if (state.currentHistoryIndex < state.navigationHistory.length - 1) {
          state.currentHistoryIndex++;
          const page = state.navigationHistory[state.currentHistoryIndex];
          navigateToWithoutHistory(page);
          updateNavigationButtons();
          updateBreadcrumbs();
        }
      }

      function navigateToWithoutHistory(page) {
        // Navigate without adding to history (used for back/forward)
        if (
          ["search", "library", "browse", "podcasts", "liked-songs"].includes(
            page,
          )
        ) {
          showPageLoading(`Loading ${page.replace("-", " ")}...`);
        }

        document.querySelector(".page.active")?.classList.remove("active");

        const newPage = document.getElementById(page);
        if (newPage) {
          newPage.classList.add("active");
          state.currentPage = page;
          updateNavigation();
          loadPageContent(page);

          if (
            ["search", "library", "browse", "podcasts", "liked-songs"].includes(
              page,
            )
          ) {
            setTimeout(hidePageLoading, 1200);
          }
        }
      }

      function updateNavigationButtons() {
        const backBtn = document.querySelector(".back-btn");
        const forwardBtn = document.querySelector(".forward-btn");

        if (backBtn) {
          backBtn.disabled = state.currentHistoryIndex <= 0;
        }

        if (forwardBtn) {
          forwardBtn.disabled =
            state.currentHistoryIndex >= state.navigationHistory.length - 1;
        }
      }

      function updateBreadcrumbs() {
        const breadcrumbsContainer = document.getElementById("breadcrumbs");
        if (!breadcrumbsContainer) return;

        const pageNames = {
          home: "Home",
          search: "Search",
          library: "Your Library",
          browse: "Browse",
          podcasts: "Podcasts",
          playlists: "Playlists",
          "liked-songs": "Liked Songs",
          profile: "Profile",
          settings: "Settings",
          help: "Help",
          about: "About",
          premium: "Premium",
          "now-playing": "Now Playing",
        };

        const currentPage = state.currentPage;
        const breadcrumbs = [];

        // Add Home if not current page
        if (currentPage !== "home") {
          breadcrumbs.push({ page: "home", name: "Home" });
        }

        // Add current page
        breadcrumbs.push({
          page: currentPage,
          name: pageNames[currentPage] || currentPage,
          current: true,
        });

        breadcrumbsContainer.innerHTML = breadcrumbs
          .map((crumb, index) => {
            const isLast = index === breadcrumbs.length - 1;
            const itemClass = crumb.current
              ? "breadcrumb-item current"
              : "breadcrumb-item";
            const clickHandler = crumb.current
              ? ""
              : `onclick="navigateTo('${crumb.page}')"`;

            return `
            <a href="#" class="${itemClass}" ${clickHandler}>
              ${crumb.name}
            </a>
            ${!isLast ? '<span class="breadcrumb-separator">/</span>' : ""}
          `;
          })
          .join("");
      }

      // Error Handling Functions
      function showError(type, container, message, onRetry) {
        const errorTypes = {
          network: {
            icon: '<svg viewBox="0 0 24 24" class="error-icon"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM13 17h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>',
            title: "Something went wrong",
            defaultMessage:
              "Failed to load content. Please check your internet connection and try again.",
          },
          timeout: {
            icon: '<svg viewBox="0 0 24 24" class="error-icon"><path fill="currentColor" d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z"/></svg>',
            title: "Request timed out",
            defaultMessage:
              "The request took too long to complete. Please try again.",
          },
          notfound: {
            icon: '<svg viewBox="0 0 24 24" class="error-icon"><path fill="currentColor" d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M13,12V7H11V14H13V12M13,17V15H11V17H13Z"/></svg>',
            title: "Content not found",
            defaultMessage:
              "The content you're looking for could not be found.",
          },
          offline: {
            icon: '<svg viewBox="0 0 24 24" class="error-icon"><path fill="currentColor" d="M23.64 7c-.45-.34-4.93-4-11.64-4-1.5 0-2.89.19-4.15.48L18.18 13.8 23.64 7zm-6.6 8.22L3.27 1.44 2 2.72l2.05 2.06C1.91 5.76.59 6.82.36 7l11.63 14.49.01.01.01-.01L17.73 11H17l.04.22zM8.5 12.5a2.5 2.5 0 0 1 5 0l-5 6.5v-6.5z"/></svg>',
            title: "You're offline",
            defaultMessage:
              "Please check your internet connection and try again.",
          },
        };

        const errorConfig = errorTypes[type] || errorTypes["network"];
        const errorMessage = message || errorConfig.defaultMessage;

        container.innerHTML = `
          <div class="error-container">
            ${errorConfig.icon}
            <h2 class="error-title">${errorConfig.title}</h2>
            <p class="error-message">${errorMessage}</p>
                        <div class="error-actions">
              ${onRetry ? '<button class="retry-btn" onclick="retryLastAction()">Try again</button>' : ""}
            </div>
          </div>
        `;

        // Store retry function
        if (onRetry) {
          window.lastRetryAction = onRetry;
        }
      }

      function retryLastAction() {
        if (window.lastRetryAction) {
          window.lastRetryAction();
          window.lastRetryAction = null;
        }
      }

      function showConnectionError(message) {
        const errorElement = document.getElementById("connection-error");
        if (!errorElement) {
          // Create connection error element if it doesn't exist
          const errorDiv = document.createElement("div");
          errorDiv.id = "connection-error";
          errorDiv.className = "connection-error";
          errorDiv.innerHTML = `
            <svg class="icon" viewBox="0 0 24 24">
              <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM13 17h-2v-6h2v6zm0-8h-2V7h2v2z"/>
            </svg>
            <span id="connection-error-text">${message}</span>
            <button onclick="hideConnectionError()" style="margin-left: auto; background: none; border: none; color: inherit; cursor: pointer;">
              <svg class="icon-sm" viewBox="0 0 24 24">
                <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
              </svg>
            </button>
          `;
          document.body.appendChild(errorDiv);
        } else {
          document.getElementById("connection-error-text").textContent =
            message;
          errorElement.classList.remove("hidden");
        }

        // Auto-hide after 5 seconds
        setTimeout(hideConnectionError, 5000);
      }

      function hideConnectionError() {
        const errorElement = document.getElementById("connection-error");
        if (errorElement) {
          errorElement.classList.add("hidden");
        }
      }

      // Network status monitoring
      function checkNetworkStatus() {
        if (!navigator.onLine) {
          showConnectionError("You're offline. Some features may not work.");
        } else {
          hideConnectionError();
        }
      }

      // Modal Functions
      function openAuthModal(mode) {
        state.authMode = mode;
        const modal = document.getElementById("auth-modal");
        const title = document.getElementById("auth-title");
        const submitText = document.getElementById("auth-submit-text");
        const switchText = document.getElementById("auth-switch-text");
        const switchBtn = document.getElementById("auth-switch-btn");

        if (mode === "login") {
          title.textContent = "Log in to Spotify";
          submitText.textContent = "Log In";
          switchText.textContent = "Don't have an account?";
          switchBtn.textContent = "Sign up for Spotify";
        } else {
          title.textContent = "Sign up for free to start listening.";
          submitText.textContent = "Sign Up";
          switchText.textContent = "Have an account?";
          switchBtn.textContent = "Log in instead";
        }

        modal.classList.remove("hidden");
      }

      function closeAuthModal() {
        document.getElementById("auth-modal").classList.add("hidden");
      }

      function switchAuthMode() {
        state.authMode = state.authMode === "login" ? "signup" : "login";
        openAuthModal(state.authMode);
      }

      // Utility Functions
      function createPlaylist() {
        const name =
          prompt("Playlist name:") ||
          `My Playlist #${state.playlists.length + 1}`;
        const newPlaylist = {
          id: Date.now(),
          name: name,
          image: "https://picsum.photos/48/48?random=" + Date.now(),
          meta: "Playlist  0 songs",
          tracks: 0,
        };

        state.playlists.push(newPlaylist);
        populatePlaylistsPage();
        populateRecentPlaylists();
        showNotification(`Created playlist: ${name}`);
      }

      function importPlaylist() {
        showNotification("Import playlist feature coming soon!");
      }

      function openPlaylist(playlistId) {
        const playlist = state.playlists.find((p) => p.id === playlistId);
        if (playlist) {
          showNotification(`Opening ${playlist.name}`);
        }
      }

      function toggleLike(trackId) {
        showNotification("Added to Liked Songs");
      }

      function toggleNotifications() {
        showNotification("No new notifications");
      }

      function browseCategory(categoryId) {
        const category = mockData.browseCategories.find(
          (c) => c.id === categoryId,
        );
        if (category) {
          showNotification(`Browsing ${category.title}`);
        }
      }

      function navigateToArtist(artistId) {
        const artist = mockData.popularArtists.find((a) => a.id === artistId);
        if (artist) {
          showNotification(`Opening ${artist.name} page`);
        }
      }

      function navigateToAlbum(albumId) {
        const album = mockData.popularAlbums.find((a) => a.id === albumId);
        if (album) {
          showNotification(`Opening ${album.title}`);
        }
      }

      function showNotification(message) {
        const notification = document.getElementById("notification");
        const text = document.getElementById("notification-text");

        text.textContent = message;
        notification.classList.add("show");

        setTimeout(() => {
          notification.classList.remove("show");
        }, 3000);
      }

      // Search functionality
      function handleSearch(query) {
        if (!query.trim()) {
          populateSearchPage();
          return;
        }

        const results = [];

        // Search songs
        mockData.trendingSongs.forEach((song) => {
          if (
            song.title.toLowerCase().includes(query.toLowerCase()) ||
            song.artist.toLowerCase().includes(query.toLowerCase())
          ) {
            results.push({ ...song, type: "song" });
          }
        });

        // Search artists
        mockData.popularArtists.forEach((artist) => {
          if (artist.name.toLowerCase().includes(query.toLowerCase())) {
            results.push({ ...artist, type: "artist" });
          }
        });

        // Search albums
        mockData.popularAlbums.forEach((album) => {
          if (
            album.title.toLowerCase().includes(query.toLowerCase()) ||
            album.artist.toLowerCase().includes(query.toLowerCase())
          ) {
            results.push({ ...album, type: "album" });
          }
        });

        displaySearchResults(results);
      }

      function displaySearchResults(results) {
        const container = document.getElementById("search-results");
        if (!container) return;

        container.innerHTML = "";

        if (results.length === 0) {
          container.innerHTML =
            '<p style="color: rgba(255, 255, 255, 0.6); text-align: center; padding: 40px;">No results found</p>';
          return;
        }

        // Group results by type
        const groupedResults = {
          song: results.filter((r) => r.type === "song"),
          artist: results.filter((r) => r.type === "artist"),
          album: results.filter((r) => r.type === "album"),
        };

        Object.entries(groupedResults).forEach(([type, items]) => {
          if (items.length === 0) return;

          const section = document.createElement("div");
          section.className = "result-section";

          const header = document.createElement("h3");
          header.className = "section-title";
          header.textContent =
            type.charAt(0).toUpperCase() + type.slice(1) + "s";
          section.appendChild(header);

          if (type === "song") {
            const list = document.createElement("div");
            list.className = "trending-list";

            items.forEach((song, index) => {
              const item = document.createElement("div");
              item.className = "trending-item";
              item.innerHTML = `
                <span class="track-number">${index + 1}</span>
                <img src="${song.image}" alt="${song.title}" class="trending-cover">
                <div class="trending-info">
                  <div class="trending-title">${song.title}</div>
                  <div class="trending-artist">${song.artist}</div>
                </div>
                <div class="trending-actions">
                  <span class="trending-duration">${song.duration}</span>
                </div>
              `;
              item.onclick = () => playTrack(song.id);
              list.appendChild(item);
            });

            section.appendChild(list);
          } else {
            const grid = document.createElement("div");
            grid.className = "cards-grid";

            items.forEach((item) => {
              const card = document.createElement("div");
              card.className = "card";
              card.innerHTML = `
                <img src="${item.image}" alt="${item.name || item.title}" class="card-image ${type === "artist" ? "artist-image" : ""}">
                <div class="card-title">${item.name || item.title}</div>
                <div class="card-subtitle">${type === "artist" ? "Artist" : item.artist}</div>
                <button class="play-button">
                  <svg class="icon-play" viewBox="0 0 24 24">
                    <path fill="currentColor" d="M8 5v14l11-7z"/>
                  </svg>
                </button>
              `;
              grid.appendChild(card);
            });

            section.appendChild(grid);
          }

          container.appendChild(section);
        });
      }

      // Event Listeners
      document.addEventListener("DOMContentLoaded", function () {
        // Navigation event listeners
        document.querySelectorAll(".nav-btn").forEach((btn) => {
          btn.addEventListener("click", () => {
            navigateTo(btn.dataset.page);
          });
        });

        document.querySelectorAll(".sidebar-nav-link").forEach((link) => {
          link.addEventListener("click", (e) => {
            e.preventDefault();
            navigateTo(link.dataset.page);
          });
        });

        // Search event listeners
        const searchInput = document.getElementById("main-search");
        if (searchInput) {
          let searchTimeout;
          searchInput.addEventListener("input", (e) => {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
              if (state.currentPage === "search") {
                handleSearch(e.target.value);
              }
            }, 300);
          });

          searchInput.addEventListener("focus", () => {
            if (state.currentPage !== "search") {
              navigateTo("search");
            }
          });
        }

        // Player controls
        const playPauseBtn = document.getElementById("play-pause-btn");
        if (playPauseBtn) {
          playPauseBtn.addEventListener("click", togglePlayPause);
        }

        // Progress bar interaction
        const progressBar = document.getElementById("progress-bar");
        if (progressBar) {
          progressBar.addEventListener("click", (e) => {
            const rect = progressBar.getBoundingClientRect();
            const percent = (e.clientX - rect.left) / rect.width;
            const fill = document.getElementById("progress-fill");
            if (fill) {
              fill.style.width = percent * 100 + "%";
            }
          });
        }

        // Filter chips
        document.addEventListener("click", (e) => {
          if (e.target.classList.contains("filter-chip")) {
            document.querySelectorAll(".filter-chip").forEach((chip) => {
              chip.classList.remove("active");
            });
            e.target.classList.add("active");
          }
        });

        // Auth form submission
        const authForm = document.getElementById("auth-form");
        if (authForm) {
          authForm.addEventListener("submit", (e) => {
            e.preventDefault();
            const action =
              state.authMode === "login" ? "Logged in" : "Account created";
            showNotification(`${action} successfully!`);
            closeAuthModal();
          });
        }

        // Modal click outside to close
        document
          .getElementById("auth-modal")
          ?.addEventListener("click", (e) => {
            if (e.target.id === "auth-modal") {
              closeAuthModal();
            }
          });

        document
          .getElementById("device-modal")
          ?.addEventListener("click", (e) => {
            if (e.target.id === "device-modal") {
              closeDeviceModal();
            }
          });

        // Initialize the app
        populateHomePage();
        populateRecentPlaylists();
        updateNavigation();
        updateNavigationButtons();
        updateBreadcrumbs();

        // Simulate progress bar movement
        setInterval(() => {
          if (state.isPlaying && state.currentTrack) {
            const fill = document.getElementById("progress-fill");
            const currentTime = document.getElementById("current-time");
            if (fill && currentTime) {
              const currentWidth = parseFloat(fill.style.width) || 0;
              const newWidth = Math.min(currentWidth + 0.5, 100);
              fill.style.width = newWidth + "%";

              const minutes = Math.floor((newWidth * 3.5) / 100);
              const seconds = Math.floor(
                ((newWidth * 3.5) / 100 - minutes) * 60,
              );
              currentTime.textContent = `${minutes}:${seconds.toString().padStart(2, "0")}`;
            }
          }
        }, 1000);
      });

      // Network monitoring
      window.addEventListener("online", () => {
        hideConnectionError();
        showNotification("Back online!");
      });

      window.addEventListener("offline", () => {
        showConnectionError("You're offline. Some features may not work.");
      });

      // Initial network check
      checkNetworkStatus();

      // Keyboard shortcuts
      document.addEventListener("keydown", (e) => {
        if (e.target.tagName === "INPUT") return;

        switch (e.code) {
          case "Space":
            e.preventDefault();
            togglePlayPause();
            break;
          case "ArrowRight":
            if (e.ctrlKey || e.metaKey) {
              // Next track
              showNotification("Next track");
            }
            break;
          case "ArrowLeft":
            if (e.ctrlKey || e.metaKey) {
              // Previous track
              showNotification("Previous track");
            }
            break;
          case "KeyL":
            if (e.ctrlKey || e.metaKey) {
              e.preventDefault();
              if (state.currentTrack) {
                toggleLike(state.currentTrack.id);
              }
            }
            break;
          case "KeyS":
            if (e.ctrlKey || e.metaKey) {
              e.preventDefault();
              toggleShuffle();
            }
            break;
          case "KeyR":
            if (e.ctrlKey || e.metaKey) {
              e.preventDefault();
              toggleRepeat();
            }
            break;
          case "KeyQ":
            if (e.ctrlKey || e.metaKey) {
              e.preventDefault();
              if (state.currentTrack) {
                addToQueue(state.currentTrack.id);
              }
            }
            break;
          case "KeyD":
            if (e.ctrlKey || e.metaKey) {
              e.preventDefault();
              if (state.currentTrack) {
                downloadForOffline(state.currentTrack.id);
              }
            }
            break;
          case "KeyO":
            if (e.ctrlKey || e.metaKey) {
              e.preventDefault();
              toggleOfflineMode();
            }
            break;
        }
      });
    </script>
  </body>
</html>
